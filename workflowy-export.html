<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <style>
      body {font-family:'Helvetica Neue', Arial, sans-serif; color:#333; font-size:13px; line-height:17px;}
      body .name,body .note {white-space:pre-wrap;}
      body ul {list-style:disc; margin:0; padding:0;}
      body li {margin:4px 0 4px 20px; padding:0;}
      body>.name {font-size:16px; line-height:21px;}
      body>.note {font-size:13px; line-height:17px;}
      body>ul {margin-top:15px;}
      body .name.done {text-decoration:line-through; color:#999;}
      body .note {font-size:12px; color:#666;}
      body .contentBold {font-weight:bold;}
      body .contentItalic {font-style:italic;}
      body .contentUnderline {text-decoration:underline;}
    </style>
  </head>
  <body>
    <span class="name">Fall 2018 COMP 426 Lecture Notes</span><ul><li><span class="name">(8/21) Introduction</span><ul><li><span class="name">Logistics and Administrivia</span><ul><li><span class="name">Day 1 Attendance and Waitlist For Getting In</span><ul><li><span class="name">https://www.cs.unc.edu/~kmp/comp426fall18/fdoc</span></li></ul></li><li><span class="name">TAs</span><ul><li><span class="name">Ryan Benner</span></li><li><span class="name">Vasavi Gajarla</span></li></ul></li><li><span class="name">Piazza</span><ul><li><span class="name"> https://piazza.com/unc/fall2018/comp426/home </span></li></ul></li><li><span class="name">Lecture Notes</span><ul><li><span class="name">https://www.cs.unc.edu/~kmp/comp426fall18/notes</span></li></ul></li><li><span class="name">Sakai</span><ul><li><span class="name">Will only be used as a gradebook.</span></li></ul></li><li><span class="name">Syllabus: http://www.cs.unc.edu/~kmp/comp426fall18/syllabus.pdf</span></li></ul></li><li><span class="name">The Original WWW</span><ul><li><span class="name">Client/Server Architecture</span><ul><li><span class="name">Client: Browser</span></li><li><span class="name">Server: Web Server</span></li></ul></li><li><span class="name">Resources requested by name</span><ul><li><span class="name">Named by URL</span><ul><li><span class="name">Mapped by server to a file.</span></li></ul></li><li><span class="name">Types</span><ul><li><span class="name">HTML</span></li><li><span class="name">Image (JPEG, GIF, PNG)</span></li><li><span class="name">Text</span></li></ul></li></ul></li><li><span class="name">Response rendered by browser</span><ul><li><span class="name">HTML rendered as web page</span><ul><li><span class="name">Embedded resources</span><ul><li><span class="name">Requested separately.</span></li><li><span class="name">Images</span></li><li><span class="name">Stylesheets</span></li></ul></li></ul></li><li><span class="name">User interacts with rendered web page</span><ul><li><span class="name">Links to other web page.</span></li></ul></li></ul></li></ul></li><li><span class="name">Anatomy of a URL</span><ul><li><span class="name">http://www.cs.unc.edu:80/~kmp/comp426fall18/index.html</span></li><li><span class="name">Protocol</span><ul><li><span class="name">http://</span></li></ul></li><li><span class="name">Server</span><ul><li><span class="name">www.cs.unc.edu</span></li></ul></li><li><span class="name">Port Number</span><ul><li><span class="name">:80</span></li><li><span class="name">"port" is an attribute of TCP connection</span></li><li><span class="name">80 is default value for http</span><ul><li><span class="name">Can be omitted from URL if default</span></li></ul></li></ul></li><li><span class="name">Path</span><ul><li><span class="name">/~kmp/comp426fall18/index.html</span></li><li><span class="name">Slash-separated components</span></li><li><span class="name">Interpretation is protocol-specific</span></li><li><span class="name">Identifies the resource being requested.</span></li></ul></li></ul></li><li><span class="name">HTTP</span><ul><li><span class="name">Hypertext Tranfer Protocol</span></li><li><span class="name">What's a protocol?</span><ul><li><span class="name">A formal set of rules for communication between two processes</span><ul><li><span class="name">In HTTP these processes are the web browser and the web server.</span></li></ul></li><li><span class="name">Who talks first?</span></li><li><span class="name">What can they say?</span></li><li><span class="name">How do they say it?</span></li></ul></li><li><span class="name">HTTP Exchange</span><ul><li><span class="name">Client sends request.</span></li><li><span class="name">Server sends reply.</span></li><li><span class="name">Connection closed.</span></li></ul></li><li><span class="name">Request</span><ul><li><span class="name">Sent by browser to web server</span></li><li><span class="name">Names the resource by URL path</span></li><li><span class="name">Specifies one of a few predefined "methods"</span><ul><li><span class="name">Indicating what is being done with the resource.</span></li></ul></li><li><span class="name">Provides additional information</span><ul><li><span class="name">meta-data about the requester</span></li><li><span class="name">acceptable formats and encodings</span></li><li><span class="name">cookies</span></li></ul></li></ul></li><li><span class="name">Mapping to files</span><ul><li><span class="name">URL path interpreted from a root location on local file storage</span></li><li><span class="name">Corresponding file is the named resource.</span></li><li><span class="name">If path is directory...</span><ul><li><span class="name">index.html if it exists</span></li><li><span class="name">directory listing if configured to allow</span></li></ul></li></ul></li><li><span class="name">Response</span><ul><li><span class="name">Sent back from web server to browser</span></li><li><span class="name">Status of response.</span></li><li><span class="name">Additional information about response.</span><ul><li><span class="name">meta-data about responder</span></li><li><span class="name">format and encoding</span></li><li><span class="name">cache directives</span></li><li><span class="name">cookie setting info</span></li></ul></li><li><span class="name">The named resource</span></li></ul></li><li><span class="name">Statelessness</span><ul><li><span class="name">Each request/response interaction is independent.</span></li><li><span class="name">Connection typically torn down after response.</span><ul><li><span class="name">But might stay open for additional request/reply exchange.</span></li></ul></li></ul></li></ul></li><li><span class="name">HTML</span><ul><li><span class="name">Format of web pages</span></li><li><span class="name">Structured Document</span><ul><li><span class="name">Tags define structure</span><ul><li><span class="name">Start / end tag pairs</span></li><li><span class="name">Text in between is content</span><ul><li><span class="name">May contain additional tag pairs</span></li></ul></li></ul></li><li><span class="name">Markup</span><ul><li><span class="name">Specify "role" of content</span><ul><li><span class="name">Header, list item, table, paragraph, ...</span></li></ul></li></ul></li><li><span class="name">Embedded resources</span><ul><li><span class="name">Images</span></li></ul></li><li><span class="name">Hyperlinks</span><ul><li><span class="name">Pointers to other documents.</span></li><li><span class="name">Addressed by URL</span></li></ul></li></ul></li></ul></li><li><span class="name">The Original Web Evolves</span><ul><li><span class="name">Separation of content and style</span></li><li><span class="name">Server-side programming</span></li><li><span class="name">Client-side programming</span></li><li><span class="name">https://evolutionofweb.appspot.com/</span></li></ul></li><li><span class="name">Separation of content and style</span><ul><li><span class="name">Original idea of HTML</span><ul><li><span class="name">Simple to author</span><ul><li><span class="name">Reasonably human-readable</span></li><li><span class="name">Tolerant of syntax variation</span></li></ul></li><li><span class="name">Links</span><ul><li><span class="name">To other documents</span></li><li><span class="name">To specific spot within a current or other document</span></li></ul></li><li><span class="name">Client-directed presentation</span></li></ul></li><li><span class="name">The Great Browser Wars</span><ul><li><span class="name">Fueled by needs of content providers and drive for market share.</span><ul><li><span class="name">Need to control rendering and design.</span></li></ul></li><li><span class="name">Leads to tag pollution and cross-browser incompatibility</span></li><li><span class="name">Syntax abuse</span></li></ul></li><li><span class="name">XML</span><ul><li><span class="name">Addressed the problem of syntax abuse and extensibility</span></li><li><span class="name">Basic rules for tag syntax and nesting</span><ul><li><span class="name">Syntax without semantics</span></li></ul></li><li><span class="name">Semantics of tag vocabularies separately specified</span><ul><li><span class="name">Extensible</span></li></ul></li><li><span class="name">Machine-verifiable</span></li></ul></li><li><span class="name">CSS</span><ul><li><span class="name">Cascading Style Sheets</span><ul><li><span class="name">CSS 2 widespread</span></li><li><span class="name">CSS 3 widespread</span></li></ul></li><li><span class="name">Addresses the problem of rendering control</span><ul><li><span class="name">Fonts, borders, layout</span></li><li><span class="name">Media-specific context</span><ul><li><span class="name">Small devices</span></li><li><span class="name">Screen readers</span></li></ul></li></ul></li><li><span class="name">Generally associated with HTML as a linked resource</span><ul><li><span class="name">One big benefit is stylesheet reuse across HTML pages</span></li></ul></li></ul></li><li><span class="name"> XHTML 1.0 / HTML 4.0</span><ul><li><span class="name">Presentation-specific tags deprecated.</span><ul><li><span class="name">CSS for presentation</span></li></ul></li><li><span class="name">Validation</span><ul><li><span class="name">Standardized tag set</span><ul><li><span class="name">And their usage</span></li></ul></li><li><span class="name">Enforced syntax rules</span></li></ul></li><li><span class="name">Major milestone in interoperability</span></li></ul></li></ul></li><li><span class="name">Server-side Programming</span><ul><li><span class="name">Motivation</span><ul><li><span class="name">Original web maps URL path to a file</span></li><li><span class="name">When is this problematic?</span><ul><li><span class="name">Dynamic content</span></li><li><span class="name">Customized content</span><ul><li><span class="name">Possibly in response to user input</span></li></ul></li><li><span class="name">Rarely accessed content</span></li></ul></li></ul></li><li><span class="name">Mechanisms</span><ul><li><span class="name">HTML Forms</span></li><li><span class="name">Common Gateway Interface (CGI)</span><ul><li><span class="name">URL path mapped to a program</span></li><li><span class="name">Program executed</span></li><li><span class="name">Output is the named resource</span></li></ul></li></ul></li><li><span class="name">Technologies</span><ul><li><span class="name">Angular</span></li><li><span class="name">Node.js</span></li><li><span class="name">Ruby on Rails</span></li><li><span class="name">PHP</span><ul><li><span class="name">Cake PHP</span></li></ul></li><li><span class="name">ASP.Net</span></li><li><span class="name">Java Servlets</span></li><li><span class="name">Cold Fusion</span></li><li><span class="name">Back-end frameworks</span><ul><li><span class="name">An integrated server-side solution that usually includes methods for template-based responses, database support, state management, etc.</span></li><li><span class="name">Most hook on to the web server via CGI</span><ul><li><span class="name">But some use customized servers and/or server plug-ins</span></li></ul></li></ul></li></ul></li></ul></li><li><span class="name">Client-side Programming</span><ul><li><span class="name">Motivation</span><ul><li><span class="name">Original web renders pages written in HTML</span><ul><li><span class="name">Embedded images</span></li><li><span class="name">Links to other pages</span></li><li><span class="name">CSS-based style</span></li></ul></li><li><span class="name">What more could you want?</span><ul><li><span class="name">Interactivity</span></li><li><span class="name">Dynamic pages</span></li></ul></li></ul></li><li><span class="name">The Document Object Model</span><ul><li><span class="name">Standardized by W3C</span><ul><li><span class="name">Browser compliance a problem</span></li></ul></li><li><span class="name">In memory data structure representing current page</span><ul><li><span class="name">Tree-based</span></li></ul></li><li><span class="name">Basic methods for manipulation</span></li><li><span class="name">Event model</span><ul><li><span class="name">Clicks, mouse, keyboard, etc.</span></li></ul></li></ul></li><li><span class="name">JavaScript</span><ul><li><span class="name">Technically ECMAScript</span></li><li><span class="name">Programming language of the web</span><ul><li><span class="name">Standardized by W3C</span></li><li><span class="name">Some browser-specific features</span></li></ul></li><li><span class="name">Executed by browser</span></li><li><span class="name">Execution environment</span><ul><li><span class="name">DOM</span></li><li><span class="name">Browser API</span></li></ul></li><li><span class="name">Current version: ES6</span><ul><li><span class="name">Lots of advanced language features</span></li><li><span class="name">Very functionally oriented.</span></li></ul></li></ul></li><li><span class="name">Alternatives to JavaScript</span><ul><li><span class="name">Plug-in based proprietary solutions.</span></li><li><span class="name">Flash</span></li><li><span class="name">Silverlight</span></li><li><span class="name">Java</span></li></ul></li></ul></li><li><span class="name">Rise of the Planet of the Apps</span><ul><li><span class="name">Web no longer about documents</span></li><li><span class="name">Now its a platform for applications</span><ul><li><span class="name">CSS provides powerful rendering and layout control</span></li><li><span class="name">JavaScript provides client-side interactivity</span></li><li><span class="name">Server-side programming provides application state and control</span></li></ul></li><li><span class="name">Examples abound</span><ul><li><span class="name">Email: Gmail, Yahoo, HotMail</span></li><li><span class="name">On-line banking</span></li><li><span class="name">Fantasy Football</span></li><li><span class="name">Workflowy</span></li></ul></li></ul></li><li><span class="name">Original MVC Web Apps</span><ul><li><span class="name">Model/View/Controller</span></li><li><span class="name">Where the pieces are</span><ul><li><span class="name">Model -&gt; Database</span></li><li><span class="name">Controller -&gt; Server-side CGI</span></li><li><span class="name">View -&gt; Client-side (i.e., JavaScript)</span></li><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/figures/old_mvc.png</span></li></ul></li></ul></li><li><span class="name">Original Web App Drawbacks</span><ul><li><span class="name">Interactive features that require server-side response not well supported</span><ul><li><span class="name">Example: Auto-completion</span></li></ul></li><li><span class="name">Dynamic information</span><ul><li><span class="name">Example: Email Inbox</span></li></ul></li><li><span class="name">Smoothness and responsiveness</span><ul><li><span class="name">Noticeable latency and rendering</span></li></ul></li></ul></li><li><span class="name">AJAX Model</span><ul><li><span class="name">The XHR mechanism</span><ul><li><span class="name">Key innovation to overcome original web app drawbacks</span></li><li><span class="name">Allows client-side code to make an HTTP request asynchronously</span><ul><li><span class="name">Response is handled by client-side code.</span></li><li><span class="name">Does NOT replace the current page with a new one.</span></li></ul></li></ul></li><li><span class="name">AJAX MVC Model</span><ul><li><span class="name">Where the pieces are</span><ul><li><span class="name">Model -&gt; Database</span></li><li><span class="name">Controller -&gt; Split between client-side and server-side</span></li><li><span class="name">View -&gt; Client-side</span></li><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/figures/ajax_mvc.png</span></li></ul></li><li><span class="name">Interface loads once and then is dynamically changed by client-sided code as needed.</span></li><li><span class="name">Communication with back end via XHR</span></li></ul></li><li><span class="name">Web services</span><ul><li><span class="name">Web-based APIs</span></li><li><span class="name">Mash ups</span></li><li><span class="name">http://youarelistening.to</span></li></ul></li></ul></li><li><span class="name">Rise of HTML 5</span><ul><li><span class="name">HTML 4 turned out to be too rigid</span></li><li><span class="name">XML still has its place, but web may not be it</span></li><li><span class="name">Increasingly web-based application is most common context rather than just documents</span></li><li><span class="name">XKCD comic</span><ul><li><span class="name">http://imgs.xkcd.com/comics/mac_pc.png</span></li></ul></li></ul></li><li><span class="name">HTML 5</span><ul><li><span class="name">Modern HTML tag set</span><ul><li><span class="name">But not necessarily XML</span></li><li><span class="name">Cleaner and tighter syntax</span></li><li><span class="name">Better support for past and incorrect content</span></li></ul></li><li><span class="name">Recognizes HTML's role in web applications</span><ul><li><span class="name">Tags that better support web applications</span></li><li><span class="name">Audio / Video tags</span></li></ul></li><li><span class="name">Support for mobile and local storage.</span></li><li><span class="name">Host of new technologies now in development to support even more sophisticated web applications.</span><ul><li><span class="name">http://upload.wikimedia.org/wikipedia/commons/f/f7/HTML5-APIs-and-related-technologies-by-Sergey-Mavrody.png</span></li></ul></li><li><span class="name">Web continues to evolve</span><ul><li><span class="name">https://evolutionofweb.appspot.com/</span></li></ul></li></ul></li><li><span class="name">Mobile: Native Apps vs. HTML 5</span><ul><li><span class="name">Mobile specific issues</span><ul><li><span class="name">Device specific hardware support</span></li><li><span class="name">Location-awareness</span></li><li><span class="name">Interface design</span></li></ul></li><li><span class="name">Closed app ecosystems vs. open source HTML5 web applications</span></li></ul></li><li><span class="name">What this class will cover</span><ul><li><span class="name">Front end technologies and programming</span><ul><li><span class="name">Back end content has been moved to COMP 521</span></li></ul></li><li><span class="name">Rough Schedule</span><ul><li><span class="name">8/21 - Intro</span></li><li><span class="name">8/23, 8/28, 8/30 - HTML / CSS</span></li><li><span class="name">8/30, 9/4, 9/6 - JavaScript basics</span></li><li><span class="name">9/11, 9/13 - Prototype object model, functions</span></li><li><span class="name">9/18, 9/20 - DOM, jQuery</span></li><li><span class="name">9/25, 9/27 - Event handling</span></li><li><span class="name">10/2, 10/4 - Advanced functions, closures</span></li><li><span class="name">10/9 - HTTP</span></li><li><span class="name">10/11, 10/16 - Server-side programming, RESTful interfaces</span></li><li><span class="name">10/23, 10/25 - UX guest speakers</span></li><li><span class="name">10/30, 11/1 - AJAX and JSON, promises?</span></li><li><span class="name">11/6 - Cookies and state</span></li><li><span class="name">11/8, 11/13 - Authentication, HTTPS</span></li><li><span class="name">11/15, 11/20 - 3rd party APIs, cross-site scripting, promises?</span></li><li><span class="name">11/27, 11/29 - React</span></li><li><span class="name">12/4 - Conclusion</span></li></ul></li><li><span class="name">Assignments</span><ul><li><span class="name">A1: HTML / CSS assignment.</span></li><li><span class="name">A2: Style / add functionality to an existing non-AJAX application.</span></li><li><span class="name">A3: Javascript Game Assignment</span></li><li><span class="name">A4: Rewrite / add functionality of non-AJAX application as AJAX application against RESTful backend.</span></li></ul></li><li><span class="name">Final Project</span><ul><li><span class="name">12/5 - Full app against backend - final project</span></li></ul></li><li><span class="name">Final Exam</span><ul><li><span class="name">Officially: Thursday, 12/13/18, 4 pm</span></li><li><span class="name">Plan is to also offer taking exam right around Thanksgiving</span></li></ul></li></ul></li></ul></li><li><span class="name">(8/23, 8/28, 8/30) HTML and CSS</span><ul><li><span class="name">HTML</span><ul><li><span class="name">The idea of markup</span><ul><li><span class="name">Not all content on a page is equal.</span><ul><li><span class="name">Content may play specific role with respect to other content and document as a whole.</span></li><li><span class="name">Example: http://www.cs.unc.edu/~kmp/comp426fall18/figures/role-of-content.png</span></li></ul></li><li><span class="name">Markup as metadata </span><ul><li><span class="name">Not content itself but enhances the expression of content</span></li><li><span class="name">Indicates structure of document</span></li><li><span class="name">Specifies role of different parts of content</span><ul><li><span class="name">With respect to document as whole</span></li><li><span class="name">With respect to other content</span></li></ul></li><li><span class="name">Decorates content with attributes</span></li></ul></li><li><span class="name">A Brief History of Markup by Jeremy Keith</span><ul><li><span class="name">http://www.alistapart.com/articles/a-brief-history-of-markup/</span></li></ul></li></ul></li><li><span class="name">Hello, world!</span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/hello-world.html</span></li><li><span class="name">DOCTYPE declaration</span><ul><li><span class="name">&lt;!DOCTYPE html&gt;</span></li><li><span class="name">Official document type declaration for HTML5</span><ul><li><span class="name">Indicates that document conforms &nbsp;to rules and semantics of HTML5</span></li></ul></li></ul></li><li><span class="name">&lt;html&gt;</span><ul><li><span class="name">"Root" element</span></li><li><span class="name">Must encompass all other elements</span></li></ul></li><li><span class="name">&lt;head&gt;</span><ul><li><span class="name">&lt;title&gt; element</span><ul><li><span class="name">Should always be included.</span></li><li><span class="name">Usually used to title browser window.</span></li></ul></li><li><span class="name">Document-level resources</span><ul><li><span class="name">Links to stylesheets</span></li><li><span class="name">Links to client-side JavaScript code</span></li></ul></li><li><span class="name">Meta information about document</span><ul><li><span class="name">Character encoding</span></li><li><span class="name">Search engine hints</span></li></ul></li></ul></li><li><span class="name">&lt;body&gt;</span><ul><li><span class="name">Structured content of web page.</span></li></ul></li><li><span class="name">No elements or content outside of &lt;head&gt; and &lt;body&gt;</span></li></ul></li><li><span class="name">Element Syntax</span><ul><li><span class="name">Start tag</span><ul><li><span class="name">Syntax: &lt;element_name [attributes]&gt;</span></li><li><span class="name">Element name identifies the type of element</span><ul><li><span class="name">HTML5 ignores case in element names</span></li><li><span class="name">Best practice: lower case</span><ul><li><span class="name">HTML 4.0 demanded lower case</span></li><li><span class="name">Easier to read</span></li></ul></li></ul></li></ul></li><li><span class="name">End tag</span><ul><li><span class="name">Syntax: &lt;/element_name&gt;</span></li><li><span class="name">Does not contain anything else (i.e., no attributes).</span></li></ul></li><li><span class="name">Element content</span><ul><li><span class="name">Everything between the start tag and end tag</span></li><li><span class="name">Other elements</span></li><li><span class="name">Text</span></li></ul></li><li><span class="name">Nesting of elements must be proper</span><ul><li><span class="name">Guarantees a tree structure</span></li><li><span class="name">Good:</span><ul><li><span class="name">&lt;div&gt; &lt;p&gt; This is &lt;span&gt; some text. &lt;/span&gt; &lt;/p&gt; &lt;/div&gt;</span></li></ul></li><li><span class="name">Bad:</span><ul><li><span class="name">&lt;div&gt; &lt;p&gt; This is &lt;span&gt; some text. &lt;/p&gt; &lt;/span&gt; &lt;/div&gt;</span></li></ul></li></ul></li><li><span class="name">Empty elements</span><ul><li><span class="name">An element that could have content but happen not to.</span></li><li><span class="name">Still specified by start/end tag pair</span></li><li><span class="name">Example: &lt;script src="my_javascript.js"&gt;&lt;/script&gt;</span></li></ul></li><li><span class="name">Void elements</span><ul><li><span class="name">Some elements are not allowed to have any content.</span></li><li><span class="name">Start tag with no corresponding end tag.</span></li><li><span class="name">Common void elements:</span><ul><li><span class="name">&lt;br&gt;, &lt;hr&gt;, &lt;link&gt;, &lt;img&gt;, &lt;meta&gt;</span></li></ul></li></ul></li><li><span class="name">"tag" vs. "element"</span><ul><li><span class="name">Sometimes used interchangeably.</span></li><li><span class="name">In this class we'll try to be more careful.</span><ul><li><span class="name">"tag" : specific sequence of characters that make up just a start tag or end tag.</span></li><li><span class="name">"element" : the entire element including start tag, element content, and end tag.</span></li></ul></li></ul></li></ul></li><li><span class="name">Attributes</span><ul><li><span class="name">Provides additional information about a specific element</span></li><li><span class="name">Specified in start tag (never in end tags)</span></li><li><span class="name">Three types of attribute syntax</span><ul><li><span class="name">Empty attribute syntax: name</span><ul><li><span class="name">Used when value is meaningless.</span><ul><li><span class="name">Just the presence of the attribute is enough</span></li></ul></li><li><span class="name">Example</span><ul><li><span class="name">&lt;input disabled&gt;</span></li><li><span class="name">Equivalent to &lt;input disabled=""&gt;</span></li></ul></li></ul></li><li><span class="name">Unquoted attributes: name=value</span><ul><li><span class="name">Used when attribute value is a simple string</span><ul><li><span class="name">No white space.</span></li><li><span class="name">No quotes (single or double)</span></li><li><span class="name">No =, &lt;, or &gt; characters.</span></li></ul></li><li><span class="name">Example</span><ul><li><span class="name">&lt;input value=yes&gt;</span></li><li><span class="name">Equivalent to &lt;input value="yes"&gt;</span></li></ul></li></ul></li><li><span class="name">Quoted attribute syntax: name="value" or name='value'</span><ul><li><span class="name">This is best practice.</span></li><li><span class="name">Example</span><ul><li><span class="name">&lt;input type='checkbox'&gt;</span></li></ul></li></ul></li></ul></li><li><span class="name">Validity of attribute name and attribute value is element specific</span></li><li><span class="name">Globally valid attributes</span><ul><li><span class="name">Attribute names that are valid for any HTML5 element</span><ul><li><span class="name">Note: list below is not complete</span></li></ul></li><li><span class="name">id</span><ul><li><span class="name">Allows an element to be given a name.</span></li><li><span class="name">Value must be unique among all id attributes of any element.</span></li></ul></li><li><span class="name">class</span><ul><li><span class="name">Value is interpreted as a white-space separated list of values</span></li><li><span class="name">We'll see more on how this is used when we get to CSS</span></li></ul></li><li><span class="name">tabindex</span><ul><li><span class="name">Value must specify a valid integer</span></li><li><span class="name">Determines focus order when user presses tab</span></li></ul></li></ul></li><li><span class="name">Custom data attributes</span><ul><li><span class="name">New feature introduced by HTML5</span></li><li><span class="name">Custom data attributes named with the prefix: "data-"</span></li><li><span class="name">Can be used to embed application-specific data associated with the element</span></li><li><span class="name">No restrictions on value.</span></li><li><span class="name">Example: &lt;span data-mascot='Tar Heels'&gt;University of North Carolina&lt;/span&gt;</span></li></ul></li></ul></li><li><span class="name">Element Semantics</span><ul><li><span class="name">HTML5 standard defines semantics</span><ul><li><span class="name">http://www.w3.org/TR/2012/WD-html5-author-20120329/</span></li><li><span class="name">http://www.w3schools.com/tags/</span></li></ul></li><li><span class="name">HTML5 Validator</span><ul><li><span class="name">http://validator.w3.org</span></li></ul></li></ul></li><li><span class="name">HTML5 vs HTML 4.0</span><ul><li><span class="name">HTML 4.0 uses "self-closing" tag syntax for void and empty elements</span><ul><li><span class="name">Example: &lt;br /&gt;</span></li><li><span class="name">HTML5 will accept this syntax</span><ul><li><span class="name">But not recommended (or maybe it is?, conflicting opinions)</span></li></ul></li></ul></li><li><span class="name">Optional end tags and implied tags</span><ul><li><span class="name">HTML5 can identify some situations for which an end tag is optional</span></li><li><span class="name">HTML5 can infer an element if it would have been required.</span></li><li><span class="name">Part of effort to standardize meaning of ambiguous document structure and/or sloppy authoring</span><ul><li><span class="name">Best practice: Do NOT rely on this feature!</span></li></ul></li></ul></li></ul></li><li><span class="name">&lt;html&gt;</span><ul><li><span class="name">Required to be the root element</span></li><li><span class="name">Should have "lang" attribute</span><ul><li><span class="name">&lt;html lang="en"&gt;</span></li></ul></li></ul></li><li><span class="name">&lt;head&gt;</span><ul><li><span class="name">Required first element within &lt;html&gt;</span></li><li><span class="name">Usually contains &lt;title&gt;, one or more &lt;meta&gt; and &lt;link&gt; tags</span></li><li><span class="name">&lt;meta&gt;</span><ul><li><span class="name">Provides meta information about document</span></li><li><span class="name">Void element (no end tag)</span></li><li><span class="name">Best practice to include &lt;meta&gt; element with "charset" attribute to indicate character encoding.</span><ul><li><span class="name">UTF-8 is commonly used for plaint text content</span></li><li><span class="name">&lt;meta charset="UTF-8"&gt;</span></li></ul></li><li><span class="name">Other meta elements use "name" and "content" attributes to specify meta data</span><ul><li><span class="name">Example: &lt;meta name="author" content="Ketan Mayer-Patel"&gt;</span></li><li><span class="name">Standard metadata names:</span><ul><li><span class="name">application-name</span></li><li><span class="name">author</span></li><li><span class="name">description</span></li><li><span class="name">generator</span></li><li><span class="name">keywords</span><ul><li><span class="name">Content interpreted as comma-separated list</span></li></ul></li></ul></li></ul></li></ul></li><li><span class="name">&lt;link&gt;</span><ul><li><span class="name">Links page to external resources</span><ul><li><span class="name">Either as auxiliary data or hyperlink</span></li></ul></li><li><span class="name">Most commonly used to link to stylesheets</span></li><li><span class="name">Attributes</span><ul><li><span class="name">href &nbsp; : URL of resource being linked</span></li><li><span class="name">rel &nbsp; &nbsp; : Relationship of link</span></li><li><span class="name">type &nbsp;: Provides type information for linked resource</span></li></ul></li><li><span class="name">We'll use &lt;link&gt; only for stylesheets, but this element can be used to provide more advanced kinds of hyperlinking than the &lt;a&gt; element.</span></li></ul></li><li><span class="name">&lt;base&gt;</span><ul><li><span class="name">Used to specify a base URL to be used for resolving relative resource paths</span></li></ul></li></ul></li><li><span class="name">Headers</span><ul><li><span class="name">&lt;h1&gt;, &lt;h2&gt;, &lt;h3&gt;, &lt;h4&gt;, &lt;h5&gt;</span></li><li><span class="name">Example: http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/headings.html</span></li></ul></li><li><span class="name">Sectioning Elements</span><ul><li><span class="name">&lt;div&gt;</span><ul><li><span class="name">Generic sectioning element</span></li><li><span class="name">Default browser rendering is to start a new block of text.</span></li></ul></li><li><span class="name">&lt;nav&gt;, &lt;article&gt;, &lt;aside&gt;, &lt;header&gt;, &lt;footer&gt;</span><ul><li><span class="name">Essentially the same as &lt;div&gt; elements that are being used in a particular way.</span></li></ul></li><li><span class="name">Example: &nbsp;http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/sectioning.html</span></li></ul></li><li><span class="name">Basic text block elements</span><ul><li><span class="name">&lt;p&gt;, &lt;pre&gt;, &lt;blockquote&gt;, &lt;br&gt;</span></li><li><span class="name">Whitespace in HTML is meaningless except in &lt;pre&gt; element content.</span></li><li><span class="name">Example: http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/lines_paragraphs.html</span></li></ul></li><li><span class="name">Lists</span><ul><li><span class="name">&lt;ul&gt;, &lt;ol&gt;</span><ul><li><span class="name">Unordered and ordered lists</span></li><li><span class="name">&lt;li&gt; specifies list items as content</span></li></ul></li><li><span class="name">&lt;dl&gt;</span><ul><li><span class="name">Definition lists</span></li><li><span class="name">&lt;dt&gt; alternated with &lt;dd&gt; provide term and associated definition</span></li></ul></li><li><span class="name">Sublists can be nested within lists</span></li><li><span class="name">Example: http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/lists.html</span></li></ul></li><li><span class="name">In-line text elements</span><ul><li><span class="name">&lt;em&gt;, &lt;strong&gt;, &lt;small&gt;, &lt;cite&gt;, &lt;abbr&gt;, &lt;code&gt;, &lt;sub&gt;, &lt;sup&gt;, &lt;span&gt;</span></li><li><span class="name">Example &nbsp;http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/structured_text.html</span></li></ul></li><li><span class="name">Images and figures</span><ul><li><span class="name">&lt;img&gt;</span><ul><li><span class="name">Void element</span></li><li><span class="name">alt attribute required</span><ul><li><span class="name">Alternate text description</span></li><li><span class="name">Used by screenreaders and text-only browsers</span></li></ul></li><li><span class="name">title attribute will provide tooltip text</span></li><li><span class="name">src attribute provides resource name</span><ul><li><span class="name">Full URL, absolute path, or relative path</span></li></ul></li></ul></li><li><span class="name">&lt;figure&gt;</span><ul><li><span class="name">New in HTML5</span></li><li><span class="name">Used in conjunction with &lt;figcaption&gt; as its first or last subelement to markup content as a figure</span></li></ul></li><li><span class="name">Example: http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/images.html</span></li></ul></li><li><span class="name">Hyperlinks</span><ul><li><span class="name">&lt;a&gt;</span></li><li><span class="name">Creates a hyperlink to another page</span></li><li><span class="name">href attribute provides resource name</span><ul><li><span class="name">Either full URL, absolute path, or relative path</span><ul><li><span class="name">Full URLs specify all parts of URL</span><ul><li><span class="name">protocol://server/path/to/resource</span></li></ul></li><li><span class="name">Absolute URLs specify whole path</span><ul><li><span class="name">Protocol and server set to be the same as that associated with current document</span></li></ul></li><li><span class="name">Relative URLs specify a path fragment</span><ul><li><span class="name">Protocol and server same as current document</span></li><li><span class="name">Path is formed by appending path fragment to path prefix associated with current document.</span><ul><li><span class="name">Path prefix defined as path up to last "/"</span></li></ul></li></ul></li><li><span class="name">&lt;base&gt;</span><ul><li><span class="name">Element within &lt;head&gt;</span></li><li><span class="name">Used to specify an alternate base URL for resolving absolute and relative paths</span></li></ul></li></ul></li><li><span class="name">href URLs can be appended with "fragment identifier" as suffix</span><ul><li><span class="name">Syntax: # followed by fragment id</span><ul><li><span class="name">Example: http://server/path/doc.html#fragid</span><ul><li><span class="name">Link to element with id attribute 'fragid' in document  '/path/doc.html' on host 'server' </span></li></ul></li></ul></li><li><span class="name">If hyperlink followed, should scroll to element with matching id attribute</span></li></ul></li></ul></li><li><span class="name">target attribute indicates where linked page is opened</span><ul><li><span class="name">_blank : new window or tab</span></li><li><span class="name">_self : replaces current page (default)</span></li></ul></li><li><span class="name">Example http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/links.html</span></li></ul></li><li><span class="name">Tables</span><ul><li><span class="name">&lt;table&gt;</span><ul><li><span class="name">Optional &lt;caption&gt; element as first subelement</span></li><li><span class="name">&lt;thead&gt; should follow if first set of rows represent column headings</span><ul><li><span class="name">Content of &lt;thead&gt; is one or more &lt;tr&gt; elements</span></li></ul></li><li><span class="name">&lt;tfoot&gt; should follow if last set of rows represent column footers</span><ul><li><span class="name">Note that if present, &lt;tfoot&gt; *precedes* &lt;tbody&gt;</span></li></ul></li><li><span class="name">&lt;tbody&gt; follows as table body</span><ul><li><span class="name">Content of &lt;tbody&gt; is one or more &lt;tr&gt; elements</span></li></ul></li><li><span class="name">Sequence of &lt;tr&gt; elements within &lt;thead&gt;, &lt;tfoot&gt;, and &lt;tbody&gt; define table rows.</span><ul><li><span class="name">&lt;th&gt; elements used within &lt;tr&gt; elements to indicate heading cells used within &lt;thead&gt; and &lt;tfoot&gt; rows</span></li><li><span class="name">&lt;td&gt; elements used within &lt;tr&gt; elements of &nbsp;&lt;tbody&gt;</span></li><li><span class="name">Column spans can be specified with colspan attribute</span></li><li><span class="name">Row spans can be specified with rowspan attribute</span></li></ul></li><li><span class="name">If &lt;table&gt; content is simply a sequence of &lt;tr&gt; elements then &lt;tbody&gt; element is inferred</span><ul><li><span class="name">This happens a lot.</span></li></ul></li></ul></li><li><span class="name">Example: http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/tables.html</span></li></ul></li><li><span class="name">Character References</span><ul><li><span class="name">The problem with &lt; and &gt;</span></li><li><span class="name">Example of the problem</span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/char-ref-problem.html</span></li></ul></li><li><span class="name">Other problems</span><ul><li><span class="name">Supporting other languages and symbols.</span><ul><li><span class="name">Unicode</span></li></ul></li></ul></li><li><span class="name">Character references as solution</span><ul><li><span class="name">Basically an escape code</span></li><li><span class="name">Two kinds:</span><ul><li><span class="name">Named character references</span><ul><li><span class="name">&amp;ref; where "ref" is character reference name</span></li><li><span class="name">Most common three:</span><ul><li><span class="name">&amp;lt; for &lt;</span></li><li><span class="name">&amp;gt; for &gt;</span></li><li><span class="name">&amp;amp; for &amp;</span></li></ul></li><li><span class="name">Other named character references</span><ul><li><span class="name">Character reference chart from Wikipedia</span><ul><li><span class="name">http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references</span></li></ul></li></ul></li></ul></li><li><span class="name">Numeric character references</span><ul><li><span class="name">Specifies the Unicode code point</span></li><li><span class="name">Format of general unicode character reference:</span><ul><li><span class="name">Decimal: &amp;#ddd;</span></li><li><span class="name">Hex: &amp;#xXXX;</span></li></ul></li></ul></li></ul></li><li><span class="name">When we need to use character references</span><ul><li><span class="name">Element content</span></li><li><span class="name">Attribute values</span><ul><li><span class="name">Less important, but if you care about validating as HTML5, then you need to use them here as well.</span></li></ul></li></ul></li><li><span class="name">Example page using character references</span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/character-reference-example.html</span></li></ul></li></ul></li></ul></li><li><span class="name">Forms</span><ul><li><span class="name">Originally used to create simple user interfaces for getting input from user</span></li><li><span class="name">When form was "submitted", new browser would generate a URL that encapsulated the input from the form and the response would replace the current page.</span><ul><li><span class="name">With AJAX-based web applications, we generally won't use the original form submission mechanisms</span></li><li><span class="name">Instead, we use AJAX requests to make an asynchronous request to the back end and dynamically update the current page to incorporate the results.</span></li></ul></li><li><span class="name">Form UI elements still useful for building interfaces</span></li><li><span class="name">HTML5 introduced additional input element types as well as some validation mechanisms</span></li><li><span class="name">&lt;form&gt;</span><ul><li><span class="name">Parent element within which form input elements are placed as content.</span></li><li><span class="name">In old-school web applications, "target" and "method" attributes controlled how browser submitted form info.</span></li></ul></li><li><span class="name">General form UI concepts</span><ul><li><span class="name">Each form UI element associated with a name and a value.</span><ul><li><span class="name">Original web: name/value pairs encoded into parameters for server-side processing as part of HTTP request.</span><ul><li><span class="name">This mechanism of encoding parameters still needed for AJAX.</span></li><li><span class="name">We'll come back to this later in the course.</span></li></ul></li></ul></li><li><span class="name">For some UI elements name/value attributes related to presentation/behavior at client-side</span><ul><li><span class="name">We'll see this with radio buttons, for example.</span></li></ul></li></ul></li><li><span class="name">&lt;input&gt;</span><ul><li><span class="name">General input element with specific input type determined by "type" attribute</span><ul><li><span class="name">HTML 4 input types</span><ul><li><span class="name">button, checkbox, file, hidden, image, password, radio, reset, submit, text</span></li></ul></li><li><span class="name">New HTML5 input types</span><ul><li><span class="name">color, date, datetime, datetime-local, email, month, number, range, search, tel, time, url, week</span></li><li><span class="name">Browser support for newer input types and validation mechanisms are evolving.</span></li></ul></li></ul></li><li><span class="name">Note that in HTML5 &lt;input&gt; is a void element</span><ul><li><span class="name">Just a start tag, no end tag.</span></li><li><span class="name">Should NOT have any content</span><ul><li><span class="name">You will see lots of pre-HTML5 content violating this because providing content to an input element was how you used to specify a display label for things like checkboxes and radio buttons.</span></li></ul></li></ul></li><li><span class="name">&lt;input type="text"&gt;</span><ul><li><span class="name">Simple one-line text input.</span></li><li><span class="name">http://www.w3schools.com/html/tryit.asp?filename=tryhtml_input</span></li></ul></li><li><span class="name">&lt;input type="password"&gt;</span><ul><li><span class="name">No real security, but does not display input text.</span></li><li><span class="name">http://www.w3schools.com/html/tryit.asp?filename=tryhtml_inputpassword</span></li></ul></li><li><span class="name">&lt;input type="radio"&gt;</span><ul><li><span class="name">Mutually exclusive with other radio buttons of the same name (presumably each provides a different value).</span></li><li><span class="name">&lt;label&gt;</span><ul><li><span class="name">Allows you to create display content associated with radio button.</span></li><li><span class="name">Simply put radio button inside &lt;label&gt; content.</span></li><li><span class="name">Clicking on rendered label content will act as if clicking on radio button itself.</span></li></ul></li><li><span class="name">http://www.w3schools.com/html/tryit.asp?filename=tryhtml_radio</span></li></ul></li><li><span class="name">&lt;input type="checkbox"&gt;</span><ul><li><span class="name">By default, initially unchecked </span></li><li><span class="name">"checked" attribute (empty) will change default to checked</span></li><li><span class="name">Same &lt;label&gt; trick as with radio button.</span></li><li><span class="name">http://www.w3schools.com/html/tryit.asp?filename=tryhtml_checkbox</span></li></ul></li><li><span class="name">&lt;input type="file"&gt;</span><ul><li><span class="name">Allows a local file to be selected.</span><ul><li><span class="name">Contents of file are transmitted to server when form is submitted.</span></li></ul></li></ul></li><li><span class="name">&lt;input type="hidden"&gt;</span><ul><li><span class="name">Provides a way to set a name/value pair to be included in form submission without any visible rendering.</span></li></ul></li><li><span class="name">&lt;input type="button"&gt;</span><ul><li><span class="name">Creates a button. No inherent semantics. No longer preferred way to create a button.</span></li></ul></li><li><span class="name">&lt;input type="reset"&gt;</span><ul><li><span class="name">Reset all UI elements to default/original state.</span></li></ul></li><li><span class="name">&lt;input type="submit"&gt;</span><ul><li><span class="name">Causes browser to construct HTTP request with encoded name/value pairs from all UI elements and initiate web request that will produce replacement page.</span></li><li><span class="name">Since that is old-school, we won't have much need for this.</span></li></ul></li></ul></li><li><span class="name">&lt;button&gt;</span><ul><li><span class="name">Form element for creating buttons.</span></li><li><span class="name">type attribute selects between different button semantics of "submit", "reset", or "button"</span></li><li><span class="name">This is preferred way of making buttons because &lt;button&gt; is allowed to have content.</span><ul><li><span class="name"> Thus you can make the button's appearance a combination of text, images, etc.</span></li></ul></li><li><span class="name">http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_button_test</span></li></ul></li><li><span class="name">&lt;textarea&gt;</span><ul><li><span class="name">Form element for multi-line editable text.</span></li><li><span class="name">http://www.w3schools.com/html/tryit.asp?filename=tryhtml_textarea</span></li></ul></li><li><span class="name">&lt;select&gt;</span><ul><li><span class="name">Form element for selection lists.</span></li><li><span class="name">size attribute set greater than 1 indicates list</span><ul><li><span class="name">Otherwise dropdown</span></li></ul></li><li><span class="name">multiple attribute indicates multiple selections</span></li><li><span class="name">&lt;option&gt; elements within &lt;select&gt; define choices</span></li><li><span class="name">http://www.w3schools.com/html/tryit.asp?filename=tryhtml_select2</span></li></ul></li><li><span class="name">Example with various form UI elements </span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/forms-nonvalid-example.html</span></li></ul></li></ul></li><li><span class="name">Comments</span><ul><li><span class="name">HTML comments start with: &lt;!--</span></li><li><span class="name">Everything considered a comment from that point until: --&gt;</span></li><li><span class="name">Demonstration on forms example.</span></li></ul></li><li><span class="name">Interesting new things in HTML5</span><ul><li><span class="name">Canvas</span><ul><li><span class="name">Provides fairly sophisticated 2D and 3D drawing area</span></li><li><span class="name">&lt;canvas&gt; element used to place drawing area in page</span></li><li><span class="name">Actual drawing occurs programmatically using JavaScript</span></li><li><span class="name">Ridiculously cool</span><ul><li><span class="name">http://net.tutsplus.com/articles/web-roundups/21-ridiculously-impressive-html5-canvas-experiments/</span></li></ul></li></ul></li><li><span class="name">Media</span><ul><li><span class="name">&lt;audio&gt; and &lt;video&gt; tags for embedding audio and video</span></li><li><span class="name">WebM video format being pushed by Google as HTML5 standard</span></li></ul></li></ul></li><li><span class="name">HTML5 Validation</span><ul><li><span class="name">W3C provides a validation service for validating web pages against different HTML standards</span><ul><li><span class="name">http://validator.w3.org</span></li><li><span class="name">Demonstrate validation check on forms-nonvalid-example.html link above.</span></li><li><span class="name">Valid version:</span><ul><li><span class="name">http://www.cs.unc.edu/Courses/comp426-f16/kmp/lec02/forms-valid-example.html</span></li></ul></li></ul></li></ul></li><li><span class="name">HTML5 Browser Support</span><ul><li><span class="name">Not all HTML5 features fully supported by all browsers</span></li><li><span class="name">http://caniuse.com</span></li><li><span class="name">Pollyfills</span><ul><li><span class="name">A "pollyfill" is a JavaScript library/code that dynamically detects the presence / absence of a HTML or JavaScript feature within a browser and then provides an equivalent alternative if necessary.</span><ul><li><span class="name">https://en.wiipedia.org/wiki/Polyfill</span></li></ul></li><li><span class="name">https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills</span></li></ul></li></ul></li></ul></li><li><span class="name">CSS</span><ul><li><span class="name">Cascading Style Sheets</span><ul><li><span class="name">Presentation instructions associated with HTML</span></li><li><span class="name">Separate content from presentation</span></li><li><span class="name">Ideal case:</span><ul><li><span class="name">HTML provides structure and content with little to no information about how the content is to be rendered.</span></li><li><span class="name">CSS describes appearance</span></li></ul></li></ul></li><li><span class="name">CSS Advantages</span><ul><li><span class="name">Site-wide consistency</span></li><li><span class="name">Bandwidth savings</span></li><li><span class="name">Easier to maintain</span></li><li><span class="name">Separation of concerns</span></li></ul></li><li><span class="name">CSS rules</span><br /><span class="note">selector {
	attribute:	value;
}</span><ul><li><span class="name">selector determines which elements are affected</span></li><li><span class="name">Attribute declarations specify specific values for a particular CSS attribute.</span><ul><li><span class="name">We're overloading the use of the word "attribute" here.</span></li><li><span class="name">CSS attribute vs. HTML attribute</span></li></ul></li></ul></li><li><span class="name">Three ways to associate CSS with HTML</span><ul><li><span class="name">External CSS</span><ul><li><span class="name">&lt;link&gt; element in &lt;head&gt;</span><ul><li><span class="name">rel attribute set to "stylesheet"</span></li><li><span class="name">type attribute set to "text/css"</span></li><li><span class="name">href attribute set to URL of stylesheet</span><ul><li><span class="name">Either fully specified URL or an absolute/relative path resolved against base path.</span></li></ul></li></ul></li></ul></li><li><span class="name">Internal CSS</span><ul><li><span class="name">&lt;style type="text/css"&gt; element in &lt;head&gt;</span><ul><li><span class="name">CSS rules specified directly as content within &lt;style&gt; element.</span></li></ul></li></ul></li><li><span class="name">In-line CSS</span><ul><li><span class="name">Any element can have "style" HTML attribute set.</span></li><li><span class="name">Value of the "style" HTML attribute are the CSS attribute declarations to be applied to this specific element.</span><ul><li><span class="name">In this case, no need for a selector since the CSS attribute declarations are being directly applied to a specific element.</span></li></ul></li><li><span class="name">In general, in-line CSS is to be avoided at pretty much all costs.</span><ul><li><span class="name">Just because you can, doesn't mean you should.</span></li></ul></li></ul></li><li><span class="name">Given competing rules:</span><ul><li><span class="name">In-line prioritized over...</span></li><li><span class="name">internal prioritized over...</span></li><li><span class="name">external</span></li></ul></li></ul></li><li><span class="name">A quick example</span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/css-ex1.html</span></li><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/css-ex2.html</span></li></ul></li><li><span class="name">Versions of CSS</span><ul><li><span class="name">CSS1</span><ul><li><span class="name">Basic style controls (font, colors, etc.)</span></li></ul></li><li><span class="name">CSS2</span><ul><li><span class="name">Added positioning model, expanded style controls</span></li></ul></li><li><span class="name">CSS3</span><ul><li><span class="name">Translucency, more advanced selector model, other advanced features.</span></li></ul></li><li><span class="name">Browser support varies</span><ul><li><span class="name">Generally CSS2 support is complete and CSS3 is pretty widespread</span></li><li><span class="name">Older browsers problematic...</span><ul><li><span class="name">...but they always will be</span></li></ul></li></ul></li></ul></li><li><span class="name">Selectors</span><ul><li><span class="name">By element type</span><ul><li><span class="name">Simply use element name as selector</span></li><li><span class="name">Matches all elements in document of that type</span></li><li><span class="name">"*"  is a wildcard that matches any element type</span></li><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/css-ex3.html</span></li></ul></li><li><span class="name">By "class" HTML attribute value</span><ul><li><span class="name">E.class</span><ul><li><span class="name">"E" stands in for an element name</span></li><li><span class="name">"class" is the value you are trying to match</span></li></ul></li><li><span class="name">Recall "class" HTML attribute is interpreted as a space separated list of values.</span></li><li><span class="name">Selector matches if class specified is one of the values.</span></li><li><span class="name">If element name not given, same as matching any element type that includes the value in list of specified by class attribute.</span><ul><li><span class="name">In other words, these two things do the same thing:</span><ul><li><span class="name">.class</span></li><li><span class="name">*.class</span></li></ul></li></ul></li><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/css-ex4.html</span></li></ul></li><li><span class="name">By "id" HTML attribute value</span><ul><li><span class="name">E#id</span><ul><li><span class="name">Again, "E" stands in for an element name</span></li><li><span class="name">"id" is the value you are trying to match</span></li></ul></li><li><span class="name">#id</span><ul><li><span class="name">Same as *#id</span></li></ul></li><li><span class="name">Recall "id" HTML attribute must be unique for all elements within a document.</span><ul><li><span class="name">This means that the E part is generally unnecessary and/or redundant.</span></li><li><span class="name">Could be useful, however, if style should be applied to element with a particular id only if it is also of a particular type.</span></li></ul></li><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/css-ex5.html</span></li></ul></li><li><span class="name">By arbitrary HTML attribute value</span><ul><li><span class="name">E[attr="value"]</span><ul><li><span class="name">Matches elements of type E that have HTML attribute "attr" set exactly to "value"</span></li><li><span class="name">E#id is just syntactic sugar for E[id="id"]</span></li></ul></li><li><span class="name">E[attr~="value"]</span><ul><li><span class="name">Matches elements of type E that have HTML attribute "attr" that when interpreted as a space separated list contains "value"</span></li><li><span class="name">E.class is just syntactic sugar for E[class~="class"]</span></li></ul></li><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/css-ex6.html</span></li></ul></li><li><span class="name">Hierarchical relationships</span><ul><li><span class="name">Recall the nesting of elements forms a tree</span><ul><li><span class="name">Every element (except &lt;html&gt;) has a parent.</span></li><li><span class="name">Any elements nested within content are children.</span><ul><li><span class="name">Children ordered by appearance in the document.</span></li></ul></li></ul></li><li><span class="name">E F</span><ul><li><span class="name">Elements of type F that are descendents of an element of type E</span><ul><li><span class="name">Need not be direct child</span></li></ul></li></ul></li><li><span class="name">E &gt; F</span><ul><li><span class="name">Elements of type F that are direct children of an element of type E</span></li></ul></li><li><span class="name">E + F</span><ul><li><span class="name">Elements of type F that are a subsequent sibling of element of type E</span></li></ul></li><li><span class="name">E:first-child</span><ul><li><span class="name">Elements of type E that are the first child of its parent</span></li></ul></li><li><span class="name">E:nth-child(N)</span><ul><li><span class="name">Elements of type E that are the Nth child (where "N" in the above represents an integer &gt;= 1)</span><ul><li><span class="name">N can be the keyword "odd" or "even"</span></li><li><span class="name">N can be specified as a function</span></li><li><span class="name">http://www.w3schools.com/cssref/sel_nth-child.asp</span></li></ul></li><li><span class="name">New to CSS3</span></li></ul></li><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/css-ex7.html</span></li></ul></li><li><span class="name">Pseudo classes</span><ul><li><span class="name">E:link</span><ul><li><span class="name">Elements of type E that represent hyperlinks that have not been visited yet.</span></li><li><span class="name">For the most part, this will only apply to &lt;a&gt;</span></li></ul></li><li><span class="name">E:visited</span><ul><li><span class="name">Elements of type E that represent hyperlinks that have been visited already.</span></li><li><span class="name">For the most part, this will only apply to &lt;a&gt;</span></li></ul></li><li><span class="name">E:active</span><ul><li><span class="name">Elements of type E that represent hyperlinks are active (i.e., mouse button pressed but not yet released)</span></li></ul></li><li><span class="name">E:hover</span><ul><li><span class="name">Element of type E that currently have the mouse hovering over them.</span></li></ul></li><li><span class="name">E:focus</span><ul><li><span class="name">Element of type E that currently has the keyboard focus.</span></li></ul></li><li><span class="name">Technically E:first-child and E:nth-child(N) are also Pseudo classes</span></li><li><span class="name">Others available in CSS3</span></li><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/css-ex8.html</span></li></ul></li><li><span class="name">Pseudo elements</span><ul><li><span class="name">E:first-line</span><ul><li><span class="name">Applies to text within an element E that is part of the first line rendered.</span></li></ul></li><li><span class="name">E:first-letter</span><ul><li><span class="name">Applies to first letter of text within an element E</span></li></ul></li><li><span class="name">Support for these is inconsistent.</span></li><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/css-ex9.html</span><ul><li><span class="name">NOTE: video link in the above example no longer works :-(</span></li></ul></li></ul></li><li><span class="name">Combining selectors</span><ul><li><span class="name">Listing selectors with a comma associates attribute declarations with each selector in list.</span></li><li><span class="name">Can also create "compound" selectors by chaining selectors together or using a selector wherever an element name is expected.</span><ul><li><span class="name">Hint: sometimes helps to read right to left when figuring out what a selector is selecting.</span></li></ul></li><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/css-ex10.html</span></li></ul></li></ul></li><li><span class="name">The Cascade</span><ul><li><span class="name">Which selector prevails if more than one applies?</span></li><li><span class="name">First by where specified.</span><ul><li><span class="name">Inline -&gt; Internal -&gt; External -&gt; Browser Default</span></li></ul></li><li><span class="name">Then by specificity</span><ul><li><span class="name done">If specified in start tag, that trumps all</span></li><li><span class="name">Then by number of IDs used in selector</span></li><li><span class="name">Then by number of classes used in selector</span></li><li><span class="name">Then by number of element names in selector</span></li><li><span class="name">Rule of thumb weight formula</span><ul><li><span class="name">weight = number of element names in selector + number of classes * 10 + number of IDs * 100</span></li></ul></li></ul></li><li><span class="name">For many style attributes, children inherit style from parent if not specified otherwise.</span></li><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/css-ex11.html</span></li></ul></li><li><span class="name">CSS Attribute Values</span><ul><li><span class="name">Legal CSS attribute values depend on attribute type</span><ul><li><span class="name">Colors</span><ul><li><span class="name">16 predefined color names that are universally supported</span><ul><li><span class="name">aqua, black, blue, fuchsia, gray / grey, green, lime, maroon, navy, olive, purple, red, silver, teal, white, yellow</span></li></ul></li><li><span class="name">130 more that are widely supported</span><ul><li><span class="name">https://www.w3schools.com/colors/colors_names.asp</span></li></ul></li><li><span class="name">Hex notation syntax</span><ul><li><span class="name">#rrggbb</span></li><li><span class="name">00-ff components for red, green, blue</span></li></ul></li><li><span class="name">rgb function notation</span><ul><li><span class="name">rgb(red, green, blue)</span><ul><li><span class="name">Where red/green/blue in above are numerical values in range 0-255, or percentages</span></li><li><span class="name">rgb(5%, 25%, 75%)</span></li><li><span class="name">rgb(12, 63, 192)</span></li></ul></li></ul></li></ul></li><li><span class="name">URL</span><ul><li><span class="name">url(...)</span></li></ul></li><li><span class="name">Lengths and Sizes</span><ul><li><span class="name">Numerical value with unit suffix</span><ul><li><span class="name">px, pt, pc, em, cm, in, mm</span></li><li><span class="name">px is default if suffix not specified</span></li></ul></li><li><span class="name">Percentages</span></li><li><span class="name">Keywords</span><ul><li><span class="name">small, smaller, large, larger, etc.</span></li></ul></li></ul></li><li><span class="name">Predefined set of named values specific to attributes</span></li></ul></li><li><span class="name">Basic style attributes</span><ul><li><span class="name">Backgrounds</span></li><li><span class="name">Text</span></li><li><span class="name">Font</span></li><li><span class="name">List appearance</span></li><li><span class="name">Table appearance</span></li></ul></li><li><span class="name">http://www.w3schools.com/cssref/default.asp</span></li></ul></li><li><span class="name">Block vs. Inline</span><ul><li><span class="name">Inline elements: "in line" with text. Laid out with flow. Left to right, line by line.</span><ul><li><span class="name">Examples: span, em, strong, img</span></li></ul></li><li><span class="name">Block elements end current flow and start a new layout that has the width of parent, height as needed</span><ul><li><span class="name">Examples: div, p, h1-h5, ul, li</span></li></ul></li></ul></li><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/css-ex12.html</span></li><li><span class="name">Box Model</span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/figures/css-box-model.png</span></li></ul></li><li><span class="name">Width and Height</span><ul><li><span class="name">width and height CSS attributes</span></li><li><span class="name">Only for block elements</span></li><li><span class="name">Affects where margin/padding/border located</span></li><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/css-ex13.html</span><ul><li><span class="name">Use "auto" as margin value to center block in parent</span></li></ul></li></ul></li><li><span class="name">Floating</span><ul><li><span class="name">float attribute</span><ul><li><span class="name">left, right, none (default)</span></li></ul></li><li><span class="name">Removes element from normal layout flow</span></li><li><span class="name">Allows text, and sibling elements to flow around</span></li><li><span class="name">Good idea to set width</span></li><li><span class="name">Multiple floats to the same side will push up against each other.</span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/css-ex14.html</span></li></ul></li></ul></li><li><span class="name">Floating Nuances</span><ul><li><span class="name">Placement in document still matters.</span><ul><li><span class="name">Floats won't be placed higher than where they would have been if not floated.</span></li></ul></li><li><span class="name">Layout of text/elements located between floating elements in document may alter floating placement in subtle ways.</span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/css-ex15.html</span></li></ul></li><li><span class="name">Floats are not accounted for in parent's height</span><ul><li><span class="name">overflow attribute controls what happens when content exceeds specified height</span><ul><li><span class="name">visible, hidden, scroll, auto</span></li><li><span class="name">scroll only works well with height specified</span></li></ul></li><li><span class="name">Block element boxes extend underneath floats</span><ul><li><span class="name">This comes into play most when calculating/setting margins and padding and where border will be visible.</span></li></ul></li><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/css-ex16.html</span></li></ul></li><li><span class="name">Clearing Floats</span><ul><li><span class="name">clear attribute will push a block element past any floats</span></li><li><span class="name">left, right, both, none (default)</span></li><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/css-ex17.html</span></li></ul></li><li><span class="name">Positioning</span><ul><li><span class="name">position attribute</span><ul><li><span class="name">relative, absolute, fixed, static (default)</span></li></ul></li><li><span class="name">top, bottom, left, right</span><ul><li><span class="name">Specifies positions of box corners</span></li></ul></li><li><span class="name">Barelyfitz.com Positioning Tutorial</span><ul><li><span class="name">http://www.barelyfitz.com/screencast/html-training/css/positioning/</span></li></ul></li></ul></li><li><span class="name">Equal-height column layouts</span><ul><li><span class="name">Surprisingly difficult to achieve if you want the column heights to automatically adjust to the content of the "tallest" column.</span></li><li><span class="name">http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks</span></li></ul></li></ul></li><li><span class="name">Display and Visibility</span><ul><li><span class="name">display attribute</span><ul><li><span class="name">inline, block, none, ...</span></li></ul></li><li><span class="name">Can be used to set CSS box model associated with an element</span></li><li><span class="name">None is useful for hiding content entirely</span></li><li><span class="name">visibility attribute</span><ul><li><span class="name">hidden, visible - default</span></li><li><span class="name">Still lays out the element, but then does not show it</span></li><li><span class="name">Compare with "display: none"</span></li></ul></li><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/lec02/css-ex18.html</span></li></ul></li><li><span class="name">CSS Resources</span><ul><li><span class="name">CSS Tutorial</span><ul><li><span class="name">http://www.w3schools.com/css/default.asp</span></li></ul></li><li><span class="name">CSS Reference</span><ul><li><span class="name">http://www.w3schools.com/cssref/default.asp</span></li></ul></li><li><span class="name">CSS Zen Garden</span><ul><li><span class="name">http://www.csszengarden.com</span></li></ul></li></ul></li><li><span class="name">Bootstrap</span><ul><li><span class="name">getbootstrap.com</span></li></ul></li><li><span class="name">CSS Preprocessors</span><ul><li><span class="name">SASS</span><ul><li><span class="name">sass-lang.com</span></li></ul></li><li><span class="name">LESS</span><ul><li><span class="name">lesscss.org</span></li></ul></li><li><span class="name">Stylus</span><ul><li><span class="name">stylus-lang.com</span></li></ul></li></ul></li></ul></li></ul></li><li><span class="name">(9/4, 9/6) JavaScript Language Basics</span><ul><li><span class="name">JavaScript backstory</span><ul><li><span class="name">Official name of language: ECMAScript</span><ul><li><span class="name">JavaScript has nothing to do with Java</span></li></ul></li><li><span class="name">Technically JavaScript is a "dialect" of ECMAScript</span><ul><li><span class="name">Contains additional features not in official ECMAScript standard</span></li></ul></li><li><span class="name">Official standard: http://www.ecmascript.org</span></li><li><span class="name">Different browsers use different ECMAScript dialects/engines</span><ul><li><span class="name">Can be a source of interoperability issues for more obscure / experimental JavaScript features</span></li></ul></li><li><span class="name">Mozilla JavaScript Reference and Guide</span><ul><li><span class="name">https://developer.mozilla.org/en/JavaScript</span></li></ul></li></ul></li><li><span class="name">JavaScript as a language</span><ul><li><span class="name">Object-oriented</span><ul><li><span class="name">But without classes</span></li><li><span class="name">Instead, uses "prototypes"</span></li></ul></li><li><span class="name">Generally not used as a standalone language</span><ul><li><span class="name">Most common: client-side JavaScript</span><ul><li><span class="name">Embedded in browser</span></li></ul></li><li><span class="name">Server-side JavaScript</span><ul><li><span class="name">We won't be doing this</span></li><li><span class="name">MongoDB</span></li><li><span class="name">Node.js</span></li></ul></li></ul></li><li><span class="name">Functions are first-class data types</span><ul><li><span class="name">Key to prototype object system as well as "closures"</span></li></ul></li></ul></li><li><span class="name">Execution context of JavaScript</span><ul><li><span class="name">JavaScript program tied to document that delivered it</span></li><li><span class="name">&lt;script&gt; tag</span></li><li><span class="name">Executes when encountered during document parse.</span><ul><li><span class="name">Old style</span><ul><li><span class="name">This featured relied upon in order to dynamically generate document content during parse.</span></li><li><span class="name">Pretty rare nowadays</span></li></ul></li><li><span class="name">New style</span><ul><li><span class="name">Defines functions and some data structures.</span></li><li><span class="name">Attaches asynchronous handlers for interactivity</span></li><li><span class="name">Sets up a "main" entry point to be executed after document parse is complete.</span></li></ul></li></ul></li><li><span class="name">Executes "within" a browser</span></li><li><span class="name">window object is API to browser functionality</span><ul><li><span class="name">window is also the global stack object, more on this later</span></li></ul></li><li><span class="name">document object is API to associated document</span><ul><li><span class="name">Also known as the DOM</span></li></ul></li></ul></li><li><span class="name">JavaScript Primer</span><ul><li><span class="name">Basic code structure</span><ul><li><span class="name">Statements separated by ;</span><ul><li><span class="name">Can be inferred, but generally not a good idea.</span></li></ul></li><li><span class="name">Blocks of code delimited by { }</span></li><li><span class="name">// Single line comment.</span></li><li><span class="name">/* Multi-line comment. */</span></li></ul></li><li><span class="name">Variables</span><ul><li><span class="name">Naming</span><ul><li><span class="name">Case sensitive</span></li><li><span class="name">Must start with letter, _, or $</span></li><li><span class="name">Can contain letters, digits, _, or $</span></li></ul></li><li><span class="name">Assignment of with =</span></li><li><span class="name">Typeless</span></li><li><span class="name">Spring into existence when assigned</span></li><li><span class="name">Declared with var or let keyword</span><ul><li><span class="name">Can forgo declaration if variable is global</span><ul><li><span class="name">BAD STYLE</span></li></ul></li></ul></li><li><span class="name">Test equality with ==</span><ul><li><span class="name">=== is an even stronger test in certain special cases</span></li></ul></li></ul></li><li><span class="name">Primitive Value Types</span><ul><li><span class="name">Numbers</span><ul><li><span class="name">Internally, always floating point</span></li><li><span class="name">Integer literals</span><ul><li><span class="name">Leading 0 indicates base 8</span></li><li><span class="name">Leading 0x indicates base 16</span></li></ul></li><li><span class="name">Floating point literals</span><ul><li><span class="name">Standard decimal notation</span></li><li><span class="name">Scientific notation with either "e" or "E"</span></li><li><span class="name">Formally: (+|-)[digits][.digits][(E|e)[(+|-)]digits]</span></li></ul></li><li><span class="name">NaN and Infinity</span><ul><li><span class="name">Special values that represent "not a number" and infinity</span></li></ul></li></ul></li><li><span class="name">Booleans</span><ul><li><span class="name">true</span></li><li><span class="name">false</span></li><li><span class="name">Numbers in a boolean context</span><ul><li><span class="name">0 is false</span></li><li><span class="name">Non-zero is true</span></li></ul></li><li><span class="name">Strings in a boolean context</span><ul><li><span class="name">"" is false</span></li><li><span class="name">Non-empty string is true</span></li></ul></li></ul></li><li><span class="name">Strings</span><ul><li><span class="name">Either ' or " for quoting</span></li><li><span class="name">Standard escape characters</span><ul><li><span class="name">\n, \', \", \\, \t, \r</span></li></ul></li><li><span class="name">Unicode escape sequence</span><ul><li><span class="name">\uXXXX  with X = hexdigit</span></li></ul></li><li><span class="name">Act like arrays for character access</span><ul><li><span class="name">Individual characters can be indexed with []</span></li><li><span class="name">"hello"[0] evaluates to "h"</span><ul><li><span class="name">Note that there is no char type.</span></li><li><span class="name">Expression above returns a 1-letter string.</span></li></ul></li></ul></li><li><span class="name">Length property</span><ul><li><span class="name">"hello".length evaluates to 5</span></li></ul></li><li><span class="name">String comparison with ==</span></li><li><span class="name">String concatenation with +</span></li><li><span class="name">String methods</span><ul><li><span class="name">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String</span></li></ul></li><li><span class="name">Strings are immutable objects</span><ul><li><span class="name">Can not set individual characters by indexing like an array.</span></li><li><span class="name">String operations create new strings</span></li><li><span class="name">String literals automatically interned and boxed/unboxed as objects as necessary.</span><ul><li><span class="name">Usually this is transparent and inconsequential but can be tricky if you create String objects with "new" keyword.</span></li></ul></li></ul></li></ul></li><li><span class="name">null</span><ul><li><span class="name">Primitive value for not having a value.</span></li><li><span class="name">Most often used to represent a null object value (i.e., no object). </span></li><li><span class="name">Case sensitive</span></li></ul></li><li><span class="name">undefined</span><ul><li><span class="name">Represents value of a variable that has been declared but not set (null or otherwise).</span></li><li><span class="name">null == undefined evaluates to true</span></li><li><span class="name">null === undefined evaluates to false</span></li></ul></li><li><span class="name">Number/string conversion</span><ul><li><span class="name">parseInt(), parseFloat()</span><ul><li><span class="name">Returns NaN if can't be parsed as an integer or float</span></li></ul></li><li><span class="name">Automatic conversion from string to number when used with numerical operators.</span><ul><li><span class="name">NOTE: + is overloaded as both addition and string concatenation and will force numbers to strings!</span></li></ul></li></ul></li></ul></li><li><span class="name">Operators</span><ul><li><span class="name">Assignment: =</span></li><li><span class="name">Comparison: ==, !=, &gt;, &gt;=, &lt;, &lt;=</span><ul><li><span class="name">Work with strings but relative order is case sensitive</span></li></ul></li><li><span class="name">Arithmetic</span><ul><li><span class="name">Standard: +, -, *, /, %</span><ul><li><span class="name">+ is overloaded as string concatenation</span></li></ul></li><li><span class="name">Unary: --, ++</span></li><li><span class="name">Bitwise: &amp;, |, ^, ~, &lt;&lt;, &gt;&gt;, &gt;&gt;&gt; (zero fill right shift)</span></li><li><span class="name">Boolean: &amp;&amp;, ||, !</span><ul><li><span class="name">Boolean operations will short-circuit</span></li></ul></li></ul></li><li><span class="name">Ternary conditional: ?</span><ul><li><span class="name">condition ? val1 : val2</span></li></ul></li></ul></li><li><span class="name">Statements</span><ul><li><span class="name">if ... else if ... else</span></li><li><span class="name">switch</span></li><li><span class="name">for</span></li><li><span class="name">while, do ... while</span></li><li><span class="name">break, continue</span></li><li><span class="name">for ... in</span><ul><li><span class="name">Iterates over enumerable properties.</span></li><li><span class="name">Careful when using this with arrays since array indices may not be visited in order and the enumeration will also include non-integer property names, if any. </span></li></ul></li></ul></li><li><span class="name">RegularExpressions</span><ul><li><span class="name">Very powerful text pattern matching mechanism</span></li><li><span class="name">https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions</span></li></ul></li><li><span class="name">Objects</span><ul><li><span class="name">Objects are just a collection of named properties.</span></li><li><span class="name">Literal syntax</span><ul><li><span class="name">{p1: v1, p2: v2, ... , pn: vn}</span></li></ul></li><li><span class="name">Properties dereferenced with the . operator</span><ul><li><span class="name">Property names have similar naming restrictions as variables</span></li><li><span class="name">Dereferencing a property that does not exist produces undefined.</span></li><li><span class="name">Setting a property that does not exist makes it spring into existence.</span></li><li><span class="name">Example: Literal objects and properties</span><ul><li><span class="name">https://jsfiddle.net/kmayerpatel/rcvL8bdg/</span></li></ul></li></ul></li><li><span class="name">Object can also act as an associative array (sometimes known as a hash)</span><ul><li><span class="name">In fact, objects really ARE associative arrays</span></li><li><span class="name">Index with [k] where k is the key </span></li><li><span class="name">The . operator is simply syntactic sugar for a string key</span><ul><li><span class="name">a.b when a is an object is really the same thing as a["b"]</span></li></ul></li><li><span class="name">Keys for object properties can actually be anything</span><ul><li><span class="name">Numbers</span><ul><li><span class="name">This is how Array works.</span></li></ul></li><li><span class="name">Other objects</span></li><li><span class="name">Strings that start with a digit</span></li></ul></li><li><span class="name">Example: Object as associative array</span><ul><li><span class="name">https://jsfiddle.net/kmayerpatel/7xL6x1xr/</span></li></ul></li></ul></li></ul></li><li><span class="name"> Arrays</span><ul><li><span class="name">0 indexed</span></li><li><span class="name">Literal syntax</span><ul><li><span class="name">[ e0, e1, ..., eN ]</span></li><li><span class="name">Missing values set as undefined</span><ul><li><span class="name">[e0 , , e2] yields array with length three with value at index 1 undefined</span></li></ul></li></ul></li><li><span class="name">Creation by constructor</span><ul><li><span class="name">new Array()</span></li><li><span class="name">new Array(arrayLength)</span></li><li><span class="name">new Array(e0, e1, ..., eN)</span></li></ul></li><li><span class="name">Auto expands to largest set index</span><ul><li><span class="name">Again, missing values get undefined</span></li></ul></li><li><span class="name">Indexed with [ ]</span></li><li><span class="name">Size provided by length property: array.length</span></li><li><span class="name">Methods</span><ul><li><span class="name">Modifying methods</span><ul><li><span class="name">pop, push, reverse, shift, sort, splice, unshift</span></li></ul></li><li><span class="name">Non-modifying methods</span><ul><li><span class="name">concat, join, slice</span></li></ul></li><li><span class="name">JavaScript 1.6 methods</span><ul><li><span class="name">indexOf, lastIndexOf, filter, forEach, every, map, some</span></li></ul></li><li><span class="name">JavaScript 1.8 methods</span><ul><li><span class="name">reduce, reduceRight</span></li></ul></li></ul></li></ul></li><li><span class="name">Functions</span><ul><li><span class="name">Functions are a first class object data type.</span><ul><li><span class="name">This is VERY IMPORTANT</span></li><li><span class="name">Because functions are objects, they can be...</span><ul><li><span class="name">... assigned to variables,</span></li><li><span class="name">... passed to a function as a parameter,</span></li><li><span class="name">... returned from functions as a result, </span></li><li><span class="name">... have properties set,</span></li><li><span class="name">... and be manipulated in various other ways.</span></li></ul></li></ul></li><li><span class="name">Defining a function</span><ul><li><span class="name">Traditional syntax</span><br /><span class="note">function f1 (p1, p2, ..., pn) {
  // Function body
}</span><ul><li><span class="name">Can only be used at the global level (i.e., not within another function).</span></li><li><span class="name">Defines f1 as a function.</span></li><li><span class="name">Parameter list p1 ... pn defines parameter names</span></li></ul></li><li><span class="name">Anonymous syntax assigned to variable name</span><br /><span class="note">var f1 = function (p1, p2, ..., pn) {
   // Function body;
};</span><ul><li><span class="name">Creates a new function object anonymously.</span></li><li><span class="name">Needs to be assigned to a variable if you want to hang on to it.</span></li><li><span class="name">This syntax can be used anywhere</span></li><li><span class="name">In fact, traditional syntax is simply syntactic sugar.</span></li><li><span class="name">My preferred syntax (even on global level).</span><ul><li><span class="name">A constant reminder that functions are just objects and function names are just variables that happen to hold a reference to a function object.</span></li></ul></li></ul></li><li><span class="name">Function constructor</span><br /><span class="note">new Function([p1, p2, ..., pn], body);</span><ul><li><span class="name">Because functions are just objects, can use the Function constructor.</span></li><li><span class="name">First argument is an array of parameter names as strings.</span></li><li><span class="name">Body is function body as a string.</span></li><li><span class="name">This syntax is not widely used.</span><ul><li><span class="name">Has a number of very subtle but important difference with respect to the anonymous syntax form.</span></li><li><span class="name">Costs more in terms of performance.</span></li></ul></li></ul></li></ul></li><li><span class="name">Calling a function</span><ul><li><span class="name">Standard syntax: f(p1, p2, ..., pn)</span><ul><li><span class="name">If called with too few parameters, unspecified parameters get the value undefined.</span></li><li><span class="name">If called with too many parameters, extra parameters can be found in array stored in local variable called "arguments".</span><ul><li><span class="name">Automatically defined when function is called.</span></li></ul></li><li><span class="name">Value types passed by value</span></li><li><span class="name">Object types passed by reference value</span><ul><li><span class="name">Note that this isn't quite the same as by reference</span></li></ul></li><li><span class="name">Example: calling a function</span><ul><li><span class="name">https://jsfiddle.net/kmayerpatel/tL5qqn1r/</span></li></ul></li></ul></li><li><span class="name">Any expression that produces a function object can then be invoked</span><ul><li><span class="name">...even if the function object is not stored in a named variable.</span></li><li><span class="name">Example: calling anonymous function as result of expression.</span><ul><li><span class="name">https://jsfiddle.net/kmayerpatel/rgc6t9nu/</span></li></ul></li></ul></li></ul></li><li><span class="name">#end_lecture5</span></li><li><span class="name">Variables declared within the function are local.</span><ul><li><span class="name">Example: Local variables in function</span><ul><li><span class="name">https://jsfiddle.net/kmayerpatel/35u1qzsf/</span></li></ul></li></ul></li><li><span class="name">Variables that are not declared as local are global</span><ul><li><span class="name">Example: Global variable access from function</span><ul><li><span class="name">https://jsfiddle.net/kmayerpatel/42x5mmpc/</span></li></ul></li></ul></li><li><span class="name">Variable declarations are "hoisted"</span><ul><li><span class="name">A variable declread with "var" has <span class="contentItalic">function scope</span>.</span><ul><li><span class="name">This means that it is a valid local variable anywhere in the function it is declared.</span></li><li><span class="name">Function scope is in effect regardless of where the declaration or first use of the variable occurs.</span></li><li><span class="name">You can think of it as the same as "hoisting" the var declarations to the top of the function.</span></li></ul></li><li><span class="name">Example: Hoisting</span><ul><li><span class="name">https://jsfiddle.net/kmayerpatel/h43vg8hs/</span></li></ul></li></ul></li><li><span class="name">New for ES6, lexically (i.e., block) scoped variables</span><ul><li><span class="name">Keyword "let" declares local variable that is scope limited to enclosing code block.</span></li><li><span class="name">No weird "hoisting"</span></li><li><span class="name">Preferred way to declare variables if ES6 is being used.</span><ul><li><span class="name">As far as I can tell, no good reason to use "var" anymore.</span></li></ul></li><li><span class="name">https://jsfiddle.net/pm546nh9/1/</span></li><li><span class="name">Also new for ES6, constant named values declared with "const"</span><ul><li><span class="name">Same block scoping as let.</span></li><li><span class="name">Once declared and initialized, can't be redeclared or set.</span></li></ul></li></ul></li><li><span class="name">Functions can be passed to other functions.</span><ul><li><span class="name">Example: function passed to a function</span><ul><li><span class="name">https://jsfiddle.net/kmayerpatel/htjm41pp/</span></li></ul></li></ul></li><li><span class="name">Functions can be the result of a function.</span><ul><li><span class="name">This creates a "closure".</span><ul><li><span class="name">When a function object is created, all variables currently "in scope" are captured in a closure.</span></li><li><span class="name">When function object is invoked (i.e., function is called), closure created when function was defined is restored (i.e., all those variables are available).</span></li><li><span class="name">Implication of this is that if a function was created within a function, all of the local variables that were in effect at the time are still available</span><ul><li><span class="name">Even if that local scope is no longer around because the original function finished!</span></li><li><span class="name">Keep in mind that each time a function is called, a new set of local variables is created just for that call.</span><ul><li><span class="name">This is why recursion works.</span></li><li><span class="name">More detail on this later.</span></li></ul></li></ul></li></ul></li><li><span class="name">Example: Function returning a function</span><ul><li><span class="name">https://jsfiddle.net/kmayerpatel/6fu09jsg/</span></li></ul></li></ul></li><li><span class="name">Functions as methods</span><ul><li><span class="name">An object property that happens to be function object will act as a method.</span></li><li><span class="name">Within the function, the "this" keyword will be a reference to the object through which the function was called.</span><ul><li><span class="name">Example: Function as an object method</span><ul><li><span class="name">https://jsfiddle.net/kmayerpatel/das1zxam/</span></li></ul></li></ul></li><li><span class="name">Can use the same function object as the property for two different objects and "this" will be set to which ever object was used to call the method.</span><ul><li><span class="name">Example: Same function as method for two different objects.</span><ul><li><span class="name">https://jsfiddle.net/kmayerpatel/dqLu5tbf/</span></li></ul></li></ul></li><li><span class="name">In fact, the "this" keyword is always available in a function, even if the function is not acting as a method of an object.</span><ul><li><span class="name">"this" will refer to the window object.</span></li></ul></li></ul></li></ul></li></ul></li></ul></li><li><span class="name">(9/6, 9/11) Prototype-Based Objects</span><ul><li><span class="name">JavaScript does not have a class system with inheritance as we generally think of with languages like C++ or Java</span><ul><li><span class="name">Instead, it is known as a "prototype" based object system</span></li><li><span class="name">There are JavaScript libraries that construct an inheritance-based class mechanism on top of this.</span><ul><li><span class="name">But we won't be doing that or using those.</span></li></ul></li></ul></li><li><span class="name">Duck typing</span><ul><li><span class="name">JavaScript is dynamically typed</span><ul><li><span class="name">Properties are resolved at the time that they are dereferenced.</span></li><li><span class="name">They either exist or they don't</span></li><li><span class="name">And even if they don't, dereferencing them doesn't kill the program</span><ul><li><span class="name">It does however, produce "undefined"</span></li></ul></li></ul></li><li><span class="name">Idea behind duck typing is that when you write a function or method that accepts an object as a parameter, as long as that object has the properties and methods that you expect, your code will work just fine.</span><ul><li><span class="name">I.e., if it looks like a duck, and talks like a duck, then....</span></li></ul></li></ul></li><li><span class="name">Using the new operator to create an object with a "type"</span><ul><li><span class="name">Used with a function object which is then treated like a constructor.</span><ul><li><span class="name">This constructing function object essentially becomes the "type" of the object.</span></li></ul></li><li><span class="name">A new empty object is created.</span></li><li><span class="name">Function object is called and the <span class="contentItalic">this</span> keyword is set to reference the new object instance.</span><ul><li><span class="name">Function object should act as a constructor.</span></li><li><span class="name">Initialize properties and methods of <span class="contentItalic">this</span></span></li><li><span class="name">No need to return anything.</span></li></ul></li><li><span class="name">Value returned by new operator is a reference to the new object.</span></li><li><span class="name">New object is linked to function object used as a constructor.</span><ul><li><span class="name">Can test "type" of object with instanceof operator</span></li><li><span class="name">In fact, built in object types like Object, Array, Date, etc. are simply function objects that act as constructors.</span></li></ul></li><li><span class="name">Example: Using new operator</span><ul><li><span class="name">https://jsfiddle.net/kmayerpatel/sx2d1byn/</span></li></ul></li></ul></li><li><span class="name">#end_lecture6</span></li><li><span class="name">Consider what happens if I take the above example and make a lot of car objects (say 1,000 or 1,000,000).</span><ul><li><span class="name">In particular, how many function objects will I create?</span></li><li><span class="name">Why is this problematic?</span></li></ul></li><li><span class="name">prototype property of function objects</span><ul><li><span class="name">Every function object has a prototype property</span><ul><li><span class="name">By default, value of prototype property is an empty object.</span></li><li><span class="name">Demonstration</span></li></ul></li><li><span class="name">When you use the . operator to dereference a property of an object it first looks to see if the object has that property.</span><ul><li><span class="name">If so, no problem.</span></li><li><span class="name">If not, then prototype object associated with constructing function is tested to see if it has the desired property.</span><ul><li><span class="name">If so, then this value is used.</span></li><li><span class="name">this keyword remains set to original object</span></li></ul></li></ul></li><li><span class="name">The prototype mechanism is used to provide properties and methods that will be shared across all objects of the same "type".</span><ul><li><span class="name">Example: Prototype methods</span><ul><li><span class="name">https://jsfiddle.net/kmayerpatel/1490L2z2/1/</span></li></ul></li></ul></li></ul></li><li><span class="name">Cool trick #1: Instance specific properties/methods</span><ul><li><span class="name">Can override prototype properties/methods on an instance-specific basis.</span></li><li><span class="name">Can use "delete" to clear instance specific property/method in order to restore prototype-based value.</span></li><li><span class="name">Example: Instance specific properties/methods</span><ul><li><span class="name">https://jsfiddle.net/kmayerpatel/nu32zL76/</span></li></ul></li></ul></li><li><span class="name">Cool trick #2: Can add new properties/methods to objects post facto</span><ul><li><span class="name">Dereferencing happens dynamically at runtime, so changes to prototype object instantly go into effect for existing objects as well.</span><ul><li><span class="name">Also known as "open" classes</span></li></ul></li><li><span class="name">Example: Post-facto properties/methods</span><ul><li><span class="name">https://jsfiddle.net/kmayerpatel/4do5zmw7/</span></li></ul></li><li><span class="name"> "static" methods and properties</span><ul><li><span class="name">Properties/methods of the constructing function object mimic what we think of as "static" methods and properties in more traditional object-oriented languages like Java and C++.</span></li><li><span class="name">Example: Static methods / properties</span><ul><li><span class="name">https://jsfiddle.net/kmayerpatel/d8Lkjhjy/</span></li></ul></li></ul></li></ul></li></ul></li><li><span class="name">(9/11, 9/18) Variable Scoping and Closures</span><ul><li><span class="name">Scope Chain</span><ul><li><span class="name">Understanding the model for how variable names are resolved will help you understand how closures work.</span></li><li><span class="name">Variable names are resolved by examining the properties of a series of objects called "the scope chain".</span><ul><li><span class="name">There is always a current scope chain. </span></li><li><span class="name">For client-side javascript, initially the scope chain is simply the "window" object.</span><ul><li><span class="name">At this point the chain has just one object so the window object is both the first and last object in the chain.</span></li><li><span class="name">In fact, window object will always be first object in the chain.</span><ul><li><span class="name">We'll see why in a second.</span></li></ul></li></ul></li></ul></li></ul></li><li><span class="name">Variable look up</span><ul><li><span class="name">When a variable name is referenced, JavaScript looks at the last object in the scope chain.</span><ul><li><span class="name">By last, I mean most recently added to the chain.</span></li></ul></li><li><span class="name">If the object has a property that matches the variable name, the value of this property is retrieved as the value of the variable.</span></li><li><span class="name">If the object does not have a property that matches the variable name, the variable name is resolved against the next object in the chain.</span><ul><li><span class="name">And so on until it gets to the first object in the chain.</span></li></ul></li><li><span class="name">If the variable name never matches, you get a "undefined variable" error.</span></li></ul></li><li><span class="name">Variable setting</span><ul><li><span class="name">If a variable name is being set (i.e., assigned to), the same procedure as in look up occurs. </span></li><li><span class="name">Matching property name in scope chain is set to new value.</span></li><li><span class="name">If property name never matches, then a property with a matching name is created in the first object in the chain and the value is set.</span><ul><li><span class="name">In effect, if no variable with that name is in scope, a new variable is created with global scope.</span></li></ul></li></ul></li><li><span class="name">When a function object is created, the current scope chain is saved as part of the function object.</span><ul><li><span class="name">It's not something that you can access directly or manipulate.</span></li></ul></li><li><span class="name">When a function object is invoked (i.e., a function is called)...</span><ul><li><span class="name">The current scope chain is squirreled away.</span><ul><li><span class="name">"Pushed on the call stack"</span></li></ul></li><li><span class="name">The scope chain that was saved as part of the function object when it was created is restored as the current scope chain.</span></li><li><span class="name">A new object is created and appended to the scope chain.</span><ul><li><span class="name">This is the "local scope object"</span></li></ul></li><li><span class="name">Parameter names are created as properties of the local scope object and set to the corresponding values passed to the function.</span></li><li><span class="name">The local scope object is given an "arguments" property which is set to an array of all of the parameters passed.</span></li><li><span class="name">The function body is scanned for any var declarations and for each variable declared, a corresponding property is created in the local scope object.</span><ul><li><span class="name">This is how locally declared variables effectively mask global variables with the same name and explains hoisting.</span></li></ul></li><li><span class="name">The function body is executed.</span></li><li><span class="name">While executing, a "let" statement adds name to scope object and end of chain.</span></li><li><span class="name">Entering a statement blocks adds a new scope object to end of chain.</span><ul><li><span class="name">Removed when statement block exited.</span></li></ul></li><li><span class="name">When the function is complete (i.e., returns or finishes)...</span><ul><li><span class="name">current scope chain discarded</span><ul><li><span class="name">Note: the *chain* is discarded, the objects on the chain may still exist if referenced some other way.</span></li></ul></li><li><span class="name">original scope chain (i.e., the one squirreled away in step one above), is restored and execution continues from where function was originally called.</span><ul><li><span class="name">"Popped off the call stack"</span></li></ul></li></ul></li></ul></li><li><span class="name">Illustrating examples</span><ul><li><span class="name">Simple top-level function with local variable</span><ul><li><span class="name">https://jsfiddle.net/kmayerpatel/5edpnuo4/</span></li></ul></li><li><span class="name">Function with masking variable calling function without masking variable</span><ul><li><span class="name">https://jsfiddle.net/kmayerpatel/j6Lx7q87/</span></li></ul></li><li><span class="name">Recursion pushing scope chains on to the stack.</span><ul><li><span class="name">https://jsfiddle.net/kmayerpatel/kctpuskv/</span></li></ul></li></ul></li><li><span class="name">Closures revisited</span><ul><li><span class="name">When a function object (call it foo) is created as part of the execution of another function (call it bar), the current scope chain gets saved as part of the new function object. </span><ul><li><span class="name">And the end of the scope chain is the local scope object associated with the call to bar / enclosing statement block.</span></li></ul></li><li><span class="name">That scope chain gets restored when this function object (i.e., foo) is invoked.</span></li><li><span class="name">That's why the local variables that were in effect at the time of the function's definition (i.e., when bar was executed) are still available even though that particular invocation of bar may have finished.</span></li><li><span class="name">Example: foo/bar closure example</span><ul><li><span class="name">https://jsfiddle.net/kmayerpatel/qpwyt4or/</span></li></ul></li><li><span class="name">Example: ying/yang closure example</span><ul><li><span class="name">https://jsfiddle.net/kmayerpatel/v1jg5phn/</span></li></ul></li><li><span class="name">Example: closing around let declared variables within loop body</span><ul><li><span class="name">https://jsfiddle.net/kmayerpatel/bdzr61wq/</span></li></ul></li></ul></li></ul></li><li><span class="name">(9/20, 9/25) The DOM, jQuery</span><ul><li><span class="name">The Document Object Model</span><ul><li><span class="name">Object-based API for a document within the browser</span><ul><li><span class="name">Standardized by W3C</span></li><li><span class="name">http://www.w3.org/DOM/Activity</span></li><li><span class="name">Our focus: DOM Core, Events, HTML</span></li></ul></li><li><span class="name">Specified in an abstract Interface Definition Language (IDL)</span><ul><li><span class="name">Language-agnostic</span></li><li><span class="name">Defines basic data types and objects that make up the DOM</span></li><li><span class="name">The DOM in JavaScript</span><ul><li><span class="name">The IDL abstraction specified in the DOM has to be implemented within a specific language</span></li><li><span class="name">Bindings exist for all kinds of languages</span></li><li><span class="name">In JavaScript, the global document object is the implementation of the DOM document root.</span><ul><li><span class="name">Methods/properties expressed in IDL all implemented as methods/properties of corresponding JavaScript objects</span></li></ul></li><li><span class="name">HTMLElement is the object "type" that implements the element interface</span><ul><li><span class="name">Added additional JavaScript-specific functionality</span><ul><li><span class="name">Not defined by DOM standards</span></li><li><span class="name">Can be browser-specific</span></li></ul></li></ul></li><li><span class="name">NodeList types can be indexed with Array-like syntax.</span></li></ul></li></ul></li></ul></li><li><span class="name">The DOM Tree</span><ul><li><span class="name">Main abstraction: tree of "Nodes"</span><ul><li><span class="name">http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/core.html#ID-1950641247</span></li><li><span class="name">Several subclasses of nodes, of those most important/useful:</span><ul><li><span class="name">Element</span></li><li><span class="name">Attribute</span></li><li><span class="name">Text</span></li></ul></li></ul></li></ul></li><li><span class="name">Document</span><ul><li><span class="name">http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/core.html#i-Document</span></li><li><span class="name">document node at root</span><ul><li><span class="name">In JavaScript, provided by global document variable</span></li></ul></li><li><span class="name">API for document-wide operations/information</span></li><li><span class="name">URI</span></li><li><span class="name">Character encoding information</span></li><li><span class="name">A lot of this developed to support HTML as an XML vocabulary</span><ul><li><span class="name">In particular, namespace related methods</span></li><li><span class="name">Since that is being de-emphasized with HTML 5, some of these facilities are dead weight just hanging around.</span></li></ul></li><li><span class="name">documentElement property</span><ul><li><span class="name">Element node that represents the element that encompasses all other elements and content in the document (i.e., &lt;html&gt;)</span></li><li><span class="name">For the most part, we tend to treat the DOM tree as a tree of elements, but *technically*, the DOM tree is a tree of nodes with some subset representing elements.</span><ul><li><span class="name">Text nodes intermingled with element nodes to represent text.</span></li><li><span class="name">Attribute nodes not in tree per se, but associated with element nodes</span></li><li><span class="name">Why this matters</span></li></ul></li></ul></li></ul></li><li><span class="name">Navigating the DOM</span><ul><li><span class="name">Node level properties/methods for traversal</span><ul><li><span class="name">parentNode</span></li><li><span class="name">childNodes</span></li><li><span class="name">firstChild</span></li><li><span class="name">lastChild</span></li></ul></li><li><span class="name">Searching for elements by type</span></li></ul></li><li><span class="name">Altering the DOM</span><ul><li><span class="name">Methods for creating new nodes for the document (defined as methods on document)</span><ul><li><span class="name">createElement</span></li><li><span class="name">createTextNode</span></li><li><span class="name">createAttribute</span></li></ul></li><li><span class="name">Methods for inserting nodes into a document (defined as methods on Node)</span><ul><li><span class="name">insertBefore</span></li><li><span class="name">replaceChild</span></li><li><span class="name">removeChild</span></li><li><span class="name">appendChild</span></li></ul></li></ul></li><li><span class="name">Hello, World</span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/dom/ex1</span></li><li><span class="name">The &lt;script&gt; tag</span><ul><li><span class="name">src attribute provides URL for JavaScript code</span></li><li><span class="name">type="text/javascript"</span></li><li><span class="name">Can provide code as content of script tag, but best practice to avoid.</span><ul><li><span class="name">Separation of concerns</span></li><li><span class="name">Similar to why we don't put CSS directly in our HTML</span></li></ul></li><li><span class="name">Evaluated immediately</span><ul><li><span class="name">Usually will define global functions, prototypes, top-level data structures, etc.</span></li><li><span class="name">Usually we'll want to delay execution of "main" entry to client-side code until after DOM is built.</span></li></ul></li></ul></li><li><span class="name">alert</span><ul><li><span class="name">Useful JavaScript built-in for displaying modal alert messages.</span></li></ul></li><li><span class="name">v1</span><ul><li><span class="name">Most strictly in compliance with W3 DOM standards</span><ul><li><span class="name">Show IDL for EventListener</span><ul><li><span class="name">http://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-EventListener</span></li></ul></li></ul></li></ul></li><li><span class="name">v2</span><ul><li><span class="name">Provides function object as handler object.</span></li><li><span class="name">JavaScript implementation of DOM interprets this the same way as handler object as specified in the DOM standard.</span></li><li><span class="name">JavaScript implementation of DOM allows a function object to be event listener directly.</span></li></ul></li><li><span class="name">v3</span><ul><li><span class="name">JavaScript non-standardized (but widely supported) innerHTML property for elements.</span></li><li><span class="name">Creating element nodes and text nodes using standard DOM routines is a pain in the ass.</span></li><li><span class="name">innerHTML provided as a property of element nodes so that you can just provide HTML as text. Text is parsed and appropriate DOM subtree is created and inserted.</span></li></ul></li></ul></li><li><span class="name">The Bad News</span><ul><li><span class="name">Dynamically altering a document using the DOM as specified is a pain in the ass</span></li><li><span class="name">This is why things like innerHTML were added, but even that is not enough</span></li><li><span class="name">DOM trees built by different browsers for the same content may not be exactly the same.</span><ul><li><span class="name">Recall that this was one of the things HTML 5 wanted to address</span></li><li><span class="name">Handling white space particularly troublesome.</span></li></ul></li><li><span class="name">Different JavaScript implementations had their own quirks</span><ul><li><span class="name">In particular with regard to event handling and how the DOM standards were implemented.</span></li><li><span class="name">IE was particularly bad.</span><ul><li><span class="name">Complete disregard for the DOM Event standard.</span></li></ul></li></ul></li><li><span class="name">Many de facto standard operations not actually in the DOM standard</span><ul><li><span class="name">XMLHttpRequest is a good example</span></li></ul></li></ul></li><li><span class="name">The Good News</span><ul><li><span class="name">JavaScript frameworks like jQuery provide much more convenient and powerful interface to the DOM (both official standard and various de facto standard operations) unified across all browsers.</span></li><li><span class="name">Important to understand that ultimately jQuery and other such frameworks are really operating at the level of the DOM</span></li></ul></li><li><span class="name">jQuery</span><ul><li><span class="name">http://jquery.com</span></li><li><span class="name">Literally a single JavaScript file</span><ul><li><span class="name">Copy of it at http://www.cs.unc.edu/~kmp/comp426fall18/jquery-3.3.1.js</span></li><li><span class="name">This copy is "development" version.</span></li><li><span class="name">Can also get a "production" version that is minified and compressed.</span></li></ul></li><li><span class="name">#end</span></li><li><span class="name">The basic jQuery idea.</span><ul><li><span class="name">Almost all jQuery functionality is accessed through a "jQuery object". </span></li><li><span class="name">This object is created with the jQuery() function.</span><ul><li><span class="name">Because this function gets used so much, it is also available as "$"</span></li></ul></li><li><span class="name">A jQuery object usually represents a collection of DOM elements.</span><ul><li><span class="name">But you can "wrap" a jQuery object around lots of different things.</span></li></ul></li><li><span class="name">Most jQuery object methods operate on all of the DOM elements in the collection.</span><ul><li><span class="name">Basically applying the same treatment to each element in turn.</span></li></ul></li><li><span class="name">Some jQuery object methods operate only on the first DOM element in the collection.</span></li><li><span class="name">Almost all jQuery object methods return itself or a new jQuery object wrapped around a different or modified set of elements as the result of the method.</span><ul><li><span class="name">This allows you to "chain" jQuery methods together in order to apply a succession of operations on a set of DOM elements.</span></li></ul></li></ul></li><li><span class="name">Reading the API documentation</span><ul><li><span class="name">Functions that are listed with initial "." represent methods available via a jQuery object.</span><ul><li><span class="name">Assumption is that you've already created the jQuery object.</span></li></ul></li><li><span class="name">Functions that start with "jQuery." are "static" functions that do not require a jQuery object to already exist.</span></li></ul></li><li><span class="name">Hello World - jQuery style.</span><ul><li><span class="name">ex2</span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/dom/ex2</span></li></ul></li></ul></li><li><span class="name">Is jQuery evil?</span><ul><li><span class="name">The library overloads WAY too much.</span></li><li><span class="name">Same method will do vastly different things depending on the number and value of the arguments.</span></li><li><span class="name">This can be incredibly difficult to deal with.</span><ul><li><span class="name">Especially when working with someone else's code that uses a function in a manner that you don't recognize or are familiar with.</span></li></ul></li><li><span class="name">This is also going to be a problem for me when teaching.</span><ul><li><span class="name">Whatever I demonstrate may in fact be a subset of what that method can do.</span></li><li><span class="name">I may not introduce all the different ways of doing something.</span></li><li><span class="name">I may introduce a way of doing something later that overloads something I explained before</span></li></ul></li></ul></li><li><span class="name">Selecting elements</span><ul><li><span class="name">$(selector)</span><ul><li><span class="name">If selector "looks" like a CSS selector, then results in a jQuery object wrapped around the collection of elements from the DOM that match the selector.</span></li><li><span class="name">The .length property of the jQuery object will tell you how many you got.</span></li><li><span class="name">You can retrieve the actual DOM element by indexing the jQuery object like an array.</span></li></ul></li><li><span class="name">Terminology: jQuery set, jQuery selection</span></li></ul></li><li><span class="name">Iterating over elements in a jQuery selection</span><ul><li><span class="name">.each(f)</span></li><li><span class="name">Accepts a function object f as an argument.</span><ul><li><span class="name">Callback gets index of each item and the element itself as parameters</span><ul><li><span class="name">Defining f as f(i,e) will capture index into i, and the element into e</span></li></ul></li><li><span class="name">Callback is also executed in the "context" of the element</span><ul><li><span class="name">In other words, the "this" keyword will be set to the element as if f were a method of each element.</span></li></ul></li></ul></li><li><span class="name">Works for normal arrays also (element in this case is just whatever is in the array).</span><ul><li><span class="name">JS 1.6 added this feature to Array as "forEach" so not as useful or as needed these days</span></li></ul></li></ul></li><li><span class="name">Altering attributes of an element</span><ul><li><span class="name">attr()</span><ul><li><span class="name">Can be used to get/set individual attributes or many attributes at once.</span></li></ul></li><li><span class="name">addClass, removeClass, toggleClass</span><ul><li><span class="name">Alters class attribute as you would expect.</span></li></ul></li></ul></li><li><span class="name">Traversing</span><ul><li><span class="name">parent(), parents()</span><ul><li><span class="name">Alters selection set to be ancestors of current selection set in tree either one level or all the way to root element.</span></li><li><span class="name">Accepts optional CSS selector to use as a filter.</span></li></ul></li><li><span class="name">children(), find()</span><ul><li><span class="name">Alters selection set to be descendents of current selections set in tree either one level (children) or all the way down (find).</span></li><li><span class="name">Accepts optional CSS selector to use as a filter.</span></li></ul></li><li><span class="name">prev(), next()</span><ul><li><span class="name">Previous and next siblings, again with possible filter.</span></li></ul></li><li><span class="name">filter()</span><ul><li><span class="name">Filters current selection with selector filter.</span></li></ul></li></ul></li><li><span class="name">Creating a new element</span><ul><li><span class="name">$(html)</span><ul><li><span class="name">Same main jQuery function used for selecting, but if argument "looks" like HTML, parses and creates new elements to match and returns jQuery selection of those elements.</span></li><li><span class="name">Typical form </span><ul><li><span class="name">$("&lt;element&gt;&lt;/element&gt;")</span><ul><li><span class="name">Then use result to modify/change as necessary.</span></li></ul></li></ul></li></ul></li></ul></li><li><span class="name">Altering contents of elements</span><ul><li><span class="name">append(c), prepend(c)</span><ul><li><span class="name">Inserts content c into each element of selection</span></li></ul></li><li><span class="name">appendTo(e), prependTo(e)</span><ul><li><span class="name">Inserts all elements of selection set into element e</span></li></ul></li></ul></li><li><span class="name">$(document).ready(function_object)</span><ul><li><span class="name">jQuery idiom for installing a "main" function to be run after the document has been fully parsed and is "ready".</span></li></ul></li><li><span class="name">Example 3</span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/dom/ex3</span></li></ul></li><li><span class="name">Example 4  </span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/dom/ex4</span></li></ul></li></ul></li></ul></li><li><span class="name">(9/27) Client-Side Event-based Programming</span><ul><li><span class="name">Event-based programming overview</span><ul><li><span class="name">Events are associated with elements of the document when user interacts with it.</span><ul><li><span class="name">Clicks</span></li><li><span class="name">Mouse entry/exit</span></li><li><span class="name">Mouse movements</span></li></ul></li><li><span class="name">Event handlers are functions designated to deal with an event.</span><ul><li><span class="name">Called when event occurs</span></li><li><span class="name">Information about the event encapsulated in an  "event object"</span><ul><li><span class="name">Passes as a parameter to the event handler</span></li><li><span class="name">Provides additional information about the event.</span></li></ul></li></ul></li><li><span class="name">Asynchronous Programming</span><ul><li><span class="name">Don't know when events are going to occur</span></li><li><span class="name">Don't know what order they are going to occur</span></li><li><span class="name">This is the point of client-side programming</span></li></ul></li></ul></li><li><span class="name">Another reason why Microsoft is Evil</span><ul><li><span class="name">W3C DOM Event Model standardizes:</span><ul><li><span class="name">Event names</span></li><li><span class="name">Event propagation</span></li><li><span class="name">Event binding</span></li><li><span class="name">Event object data</span></li></ul></li><li><span class="name">Microsoft does all of this slightly differently</span></li></ul></li><li><span class="name">jQuery to the rescue</span><ul><li><span class="name">Normalizes everything</span></li><li><span class="name">Other JS frameworks do the same</span><ul><li><span class="name">In fact, normalizing event handling is arguably what drove the need for JS frameworks</span></li></ul></li><li><span class="name">For now, we'll learn the jQuery way of doing things</span><ul><li><span class="name">From that, you should be able to conceptually map other ways of doing things if you end up using a different JS framework in the future</span></li><li><span class="name">Keep in mind: all of this is layered on top of either DOM or IE event model, neither of which is very clean.</span></li></ul></li></ul></li><li><span class="name">.on()</span><ul><li><span class="name">jQuery's most general and most up-to-date way of setting up an event handler</span><ul><li><span class="name">http://api.jquery.com/on/</span></li><li><span class="name">bind(), unbind(), delegate(), live() are all prior methods for setting up event handlers, but some version of on() will do anything these older methods do.</span></li></ul></li></ul></li><li><span class="name">Event names</span><ul><li><span class="name">Most common events that you will generally use broken down by category</span><ul><li><span class="name">Mouse Events</span><ul><li><span class="name">click, dblclick, mousedown, mouseup, mousemove, mouseenter, mouseleave, mouseover, mouseout</span></li></ul></li><li><span class="name">Keyboard Events</span><ul><li><span class="name">keydown, keyup, keypress</span></li></ul></li><li><span class="name">Document Events</span><ul><li><span class="name">load, unload</span></li></ul></li><li><span class="name">Form and Form UI Events</span><ul><li><span class="name">select, change, submit, reset, focus, blur</span></li></ul></li></ul></li><li><span class="name">Most DOM Level 3 events are supported in jQuery</span><ul><li><span class="name">See: http://www.quirksmode.org/dom/events for a reasonable list with browser compatibility information.</span><ul><li><span class="name">This site is a little outdated, but I haven't found anything else quite as good.</span></li></ul></li></ul></li><li><span class="name">jQuery also provides ability to define custom event names and mechanism for "triggering" an event (standard or custom)</span></li></ul></li><li><span class="name">Direct binding example</span><ul><li><span class="name">.on(events, handler)</span><ul><li><span class="name">events is a space-separated list of event names</span></li><li><span class="name">handler is a function object that is called when event occurs</span></li><li><span class="name">handler is executed when any event in list occurs for any element in jQuery selection</span></li></ul></li><li><span class="name">Example 1</span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/events/ex1</span></li><li><span class="name">In event handler, this keyword is set to DOM element where handler was registered.</span><ul><li><span class="name">Makes it easy to reuse the same event handler for different elements that have similar behavior.</span></li></ul></li><li><span class="name">css()</span><ul><li><span class="name">jQuery function to get/set CSS style attributes associated with element</span></li><li><span class="name">Note need to wrap jQuery object around 'this' before trying to use css() method.</span></li></ul></li></ul></li></ul></li><li><span class="name">Event Object</span><ul><li><span class="name">Additional information about the event provided in first parameter to event handler.</span><ul><li><span class="name">Known as the "event object"</span></li></ul></li><li><span class="name">Specific properties of the event object depend on the kind of event being handled</span></li><li><span class="name">jQuery extends event object with additional capabilities and normalizes some properties</span><ul><li><span class="name">To do this, jQuery creates its own version of the event object which is what it passes to your event handler.</span><ul><li><span class="name">Usually this event object is more than good enough</span><ul><li><span class="name">If you really need it, originalEvent property will give you the original event object generated by the underlying DOM or IE event mechanism.</span></li></ul></li></ul></li></ul></li><li><span class="name">Mouse click event data example</span><ul><li><span class="name">Example 2</span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/events/ex2</span></li><li><span class="name">Notice that I can pass anonymous function object to .on() directly</span></li><li><span class="name">.html()</span><ul><li><span class="name">Same as .empty().append()</span></li></ul></li></ul></li><li><span class="name">type</span><ul><li><span class="name">Identifies event type. Useful if the same handler is being used to handle several different event types and needs to distinguish between them.</span></li></ul></li><li><span class="name">clientX, clientY, screenX, screenY</span><ul><li><span class="name">Mouse position info.</span></li><li><span class="name">Client with respect to browser window</span></li><li><span class="name">Screen with respect to screen as a whole</span></li></ul></li><li><span class="name">timeStamp</span><ul><li><span class="name">Time when event occurs measured in millis since Jan 1, 1970</span></li><li><span class="name">jQuery-specific</span></li></ul></li><li><span class="name">button</span><ul><li><span class="name">W3C indicator of which button clicked</span><ul><li><span class="name">0 = left, 1 = middle, 2 = right</span></li></ul></li></ul></li><li><span class="name">which</span><ul><li><span class="name">IE indicator of which button clicked</span><ul><li><span class="name">1=left, 2=middle, 3=right</span></li></ul></li></ul></li><li><span class="name">shiftKey, ctlrKey, altKey, metaKey</span><ul><li><span class="name">Indicates true/false if these keys were depressed at time of event</span></li></ul></li><li><span class="name">target</span><ul><li><span class="name">Where event occurred</span></li><li><span class="name">For directly bound event handler, same as "this"</span></li></ul></li><li><span class="name">currentTarget</span><ul><li><span class="name">Where event handler was registered</span></li><li><span class="name">For directly bound event handler, same as "this"</span></li></ul></li></ul></li><li><span class="name">Mouse move event data example</span><ul><li><span class="name">Example 3</span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/events/ex3</span></li><li><span class="name">offset()</span><ul><li><span class="name">Returns object with element's position info offset from document origin</span></li></ul></li><li><span class="name">width(), height()</span><ul><li><span class="name">Returns element width and height info</span></li></ul></li></ul></li></ul></li><li><span class="name">Keyboard event data example</span><ul><li><span class="name">Example 4</span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/events/ex4</span></li></ul></li><li><span class="name">In order for an element to receive keyboard events, it must have the "focus".</span><ul><li><span class="name">Can only have "focus" if it is included in the "taborder"</span><ul><li><span class="name">Some elements naturally are by default</span><ul><li><span class="name">text inputs, text areas, buttons, etc.</span></li></ul></li><li><span class="name">Otherwise, need to provide a value for "taborder" attribute</span></li></ul></li></ul></li><li><span class="name">Event object for keyboard events have key information instead of position information</span><ul><li><span class="name">charCode, which</span><ul><li><span class="name">Defined for keyPress events</span></li><li><span class="name">Note that meaning of 'which' property changes bases on event type.</span><ul><li><span class="name">Here it indicates same information as charCode</span></li></ul></li><li><span class="name">Can turn charCode into string with String.fromCharCode() method</span><ul><li><span class="name">Non-printables return ""</span></li></ul></li></ul></li></ul></li></ul></li><li><span class="name">keypress vs. keydown vs. keyup</span><ul><li><span class="name">keypress is a "logical" event.</span><ul><li><span class="name">Pressed and then released a key.</span></li><li><span class="name">Which key combined with possible modifiers map to a specific charCode</span><ul><li><span class="name">Saw this in Example 4</span></li></ul></li></ul></li><li><span class="name">keydown and keyup are "physical" events</span><ul><li><span class="name">Correspond to a specific key being depressed and then released.</span></li><li><span class="name">Specific key reported as keyCode (also reported in which)</span><ul><li><span class="name">Not the same as charCode</span></li><li><span class="name">Identifies the actual physical key pressed and not the character typed.</span><ul><li><span class="name">No interpretation of key with respect to modifiers or keyboard mapping.</span></li></ul></li></ul></li></ul></li></ul></li></ul></li><li><span class="name">Default event processing</span><ul><li><span class="name">Browser may have built-in behavior associated with event.</span><ul><li><span class="name">Pressing submit button on a form will attempt to load new URL constructed from form target attribute possibly combined with form data as parameters</span></li><li><span class="name">Pressing backspace will go back to last URL (i.e., back in URL history)</span><ul><li><span class="name">This is what happens with Example 4 in Firefox</span></li></ul></li></ul></li><li><span class="name">preventDefault() method of event object will prevent any default event processing</span></li><li><span class="name">Example 4, v2</span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/events/ex4v2</span></li></ul></li><li><span class="name">Browser quirks</span><ul><li><span class="name">Firefox fires keypress for some things that Chrome does not.</span><ul><li><span class="name">For example, backspace.</span></li></ul></li></ul></li></ul></li><li><span class="name">Event Propagation</span><ul><li><span class="name">Events propagate up the DOM tree.</span><ul><li><span class="name">All matching handlers on any element in the path up to the root are invoked.</span></li><li><span class="name">Example 5, propagation demonstration.</span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/events/ex5</span></li><li><span class="name">Can distinguish between where event originated and where it is being processed.</span></li><li><span class="name">target vs. currentTarget</span></li></ul></li></ul></li><li><span class="name">Propagation can be stopped using stopPropagation() method of event object.</span><ul><li><span class="name">Example 6</span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/events/ex6</span></li><li><span class="name">.data() can be used to attach/retrieve arbitrary data with an element</span></li></ul></li></ul></li></ul></li><li><span class="name">Example 7: Draggable DIVs</span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/events/ex7/</span></li><li><span class="name">Version 1</span><ul><li><span class="name">position()</span><ul><li><span class="name">Like offset() but retrieves position information relative to parent element</span></li></ul></li><li><span class="name">Text selection mixed in with dragging.</span></li><li><span class="name">Go too fast and we lose control.</span></li><li><span class="name">Why is this happening?</span></li></ul></li><li><span class="name">Problem 1: Dragging mouse will select text</span><ul><li><span class="name">This is default browser behavior that needs to be suppressed</span></li><li><span class="name">Example 7, v2</span></li></ul></li><li><span class="name">Problem 2:  Going too fast loses mouse move events</span><ul><li><span class="name">Also, what happens with mouse move events when I'm not dragging?</span></li><li><span class="name">Example 7, v3</span><ul><li><span class="name">By moving mousemove handler to body element, ensures we process event even if pointer moves too fast or overlaps with a different element.</span></li><li><span class="name">Setting up mousemove handler as part of mousedown handler and tearing down mousemove handler as part of mouseup avoids processing mousemove events when not needed.</span></li><li><span class="name">.on(events, data, handler)</span><ul><li><span class="name">This form of on() allows you to provide data that will be delivered with the event object as e.data (assuming e is the event object).</span></li></ul></li><li><span class="name">.off(events, handler)</span><ul><li><span class="name">Removes an event handler.</span></li><li><span class="name">Note that for this to work, you need to have access to the original function object that you used with .on()</span><ul><li><span class="name">In example 3-v3 we do this by naming the mousemove handler</span></li></ul></li></ul></li></ul></li></ul></li></ul></li><li><span class="name">jQuery Event Delegation</span><ul><li><span class="name">Motivation</span><ul><li><span class="name">Often will have a number of elements that all need the same behavior.</span></li><li><span class="name">If the total number of elements is large or dynamic (i.e., new elements come and go), then setting up event handlers on them can be tedious.</span></li></ul></li><li><span class="name">jQuery event delegation takes advantage of event bubbling to establish an event handler at some ancestor element that is automatically attached to descendants that match some selector criterion (even if added to the DOM in the future!).</span><ul><li><span class="name">on(events, selector, data, handler)</span><ul><li><span class="name">If you don't need data, then set to null.</span></li></ul></li><li><span class="name">Event will fire for any descendants of element that match selector.</span></li><li><span class="name">By specifying a selector, jQuery recognizes this use of delegation and sets "this" keyword to be element where event actually occurred.</span><ul><li><span class="name">In other words, descendant that matched the selector.</span></li><li><span class="name">Makes it so that you can write the handler as if it were directly bound to the selected descendant and not to the ancestor where you actually registered it.</span></li><li><span class="name">The ancestor where handler is actually registered available via event object as delegateTarget property.</span></li></ul></li></ul></li><li><span class="name">Example 8</span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/events/ex8</span></li><li><span class="name">Note use of preventDefault() to keep form submission from attempting to load new URL.</span></li></ul></li></ul></li><li><span class="name">setInterval, clearInterval</span><ul><li><span class="name">setInterval(f, delay)</span><ul><li><span class="name">Will execute function object f every delay milliseconds</span></li><li><span class="name">Return value is an "interval id" that can be used with clearInterval to stop.</span></li></ul></li><li><span class="name">clearInterval(id)</span><ul><li><span class="name">Given interval id returned by setInterval, will stop periodic execution.</span></li></ul></li><li><span class="name">setTimeout(f, delay), clearTimeout(id)</span><ul><li><span class="name">Same as set/clear interval, but doesn't repeat after execution.</span></li></ul></li><li><span class="name">Example 9</span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/events/ex9</span><ul><li><span class="name">Version 1</span><ul><li><span class="name">Demonstrates Date objects</span></li><li><span class="name">Constantly updates display interval even if timer not running.</span></li></ul></li><li><span class="name">Version 2</span><ul><li><span class="name">Only sets up periodic update of display when timer is running.</span></li></ul></li></ul></li></ul></li></ul></li></ul></li><li><span class="name">(10/2) Arrow functions </span><ul><li><span class="name">Arrow functions provide a more streamlined syntax for function expressions.</span><ul><li><span class="name">(parameters) =&gt; {function body}</span></li></ul></li><li><span class="name">"this" remains bound to value at time of definition.</span><ul><li><span class="name">Different from normal function expressions which bind this at the time function is called.</span><ul><li><span class="name">If accessed as object property, then object.</span></li><li><span class="name">If called as event handler, then element where event occured.</span></li><li><span class="name">If called as timeout, then window object.</span></li></ul></li><li><span class="name">Difference can be useful in situations where otherwise would have to stash value of "this" in closure.</span><ul><li><span class="name">Event example 10</span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/events/ex10</span></li></ul></li></ul></li></ul></li></ul></li><li><span class="name">(10/4) A2</span><ul><li><span class="name">Pre-AJAX web app model.</span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/figures/old_mvc.png</span></li></ul></li><li><span class="name">Tour of Q &amp; A app functionality</span></li><li><span class="name">Looking at Q&amp;A interface structure using developer tools.</span></li><li><span class="name">Review of A2</span></li><li><span class="name">Demonstrate using CSS to style Q and A</span><ul><li><span class="name">Work on local file and then uploading to server.</span></li><li><span class="name">Work directly on files on the server.</span></li></ul></li><li><span class="name">Demonstrate using JavaScript to manipulate / rearrange Q and A interface</span></li><li><span class="name">Demonstrate using JavaScript to add client-side functionality to Q and A app.</span></li></ul></li><li><span class="name"> (10/9)  HTTP</span><ul><li><span class="name">HTML vs HTTP</span><ul><li><span class="name">HTML specifies syntax and semantics of web page content</span></li><li><span class="name">HTTP is a request/response protocol</span><ul><li><span class="name">Protocol</span><ul><li><span class="name">A formal set of rules for communicating over a network.</span></li><li><span class="name">Specifies message syntax and semantics</span><ul><li><span class="name">Order of messages and what is valid at any given time</span></li><li><span class="name">Who speaks first and what they are expected to say</span></li></ul></li></ul></li></ul></li><li><span class="name">HTTP can be used for any kind of resource</span><ul><li><span class="name">Resource named by URL path</span></li></ul></li></ul></li><li><span class="name">Protocol layering</span><ul><li><span class="name">Network protocols are built on top of each other.</span><ul><li><span class="name">Service model associated with each layer</span></li></ul></li><li><span class="name">More complex services built on top of simpler services</span></li></ul></li><li><span class="name">HTTP is built on top of TCP.</span><ul><li><span class="name">Assumes the following will be provided by TCP:</span><ul><li><span class="name">First-in-first-out reliable byte stream between processes</span></li></ul></li></ul></li><li><span class="name">TCP is in turn built on top of other protocols</span><ul><li><span class="name">In particular: IP (Internet Protocol)</span></li><li><span class="name">IP Service Model</span><ul><li><span class="name">Unreliable best-effort delivery of messages between hosts</span></li></ul></li></ul></li><li><span class="name">TCP/IP as a narrow waist</span></li><li><span class="name">Basic HTTP Exchange</span><ul><li><span class="name">Establish connection</span><ul><li><span class="name">This is TCP's job</span></li><li><span class="name">Needs to know hostname and port number</span></li></ul></li><li><span class="name">Client sends a request</span><ul><li><span class="name">Who is the client?</span></li></ul></li><li><span class="name">Server sends a response</span></li><li><span class="name">Possibly repeat</span><ul><li><span class="name">Only possible if using HTTP 1.1</span></li><li><span class="name">HTTP 1.0 allows only one request/response exchange per connection.</span></li></ul></li><li><span class="name">Close connection</span></li></ul></li><li><span class="name">Typical use with HTML</span><ul><li><span class="name">First HTTP exchange to retrieve HTML page</span></li><li><span class="name">Subsequent HTTP exchanges to retrieve any associated content:</span><ul><li><span class="name">Stylesheets</span></li><li><span class="name">JavaScript</span></li><li><span class="name">Images</span></li><li><span class="name">Ads</span></li><li><span class="name">Media</span></li></ul></li></ul></li><li><span class="name">HTTP is stateless</span><ul><li><span class="name">Each request/response is independent</span></li><li><span class="name">No notion of persistent conversation between client and server</span></li><li><span class="name">Why is this good?</span></li><li><span class="name">Why is this bad?</span></li></ul></li><li><span class="name">HTTP Requests</span><ul><li><span class="name">3 parts:</span><ul><li><span class="name">Request-line</span></li><li><span class="name">Header section</span><ul><li><span class="name">One header per line</span></li><li><span class="name">Empty line indicates end of headers</span></li></ul></li><li><span class="name">Message Body</span><ul><li><span class="name">May or may not exists</span></li><li><span class="name">Often doesn't for requests</span></li></ul></li></ul></li><li><span class="name">Request Line</span><ul><li><span class="name">Single line of text.</span></li><li><span class="name">METHOD RESOURCE VERSION</span></li><li><span class="name">METHOD</span><ul><li><span class="name">One of a well-defined set of operations</span></li><li><span class="name">GET, POST, PUT, DELETE, OPTIONS, HEAD, TRACE, CONNECT</span></li><li><span class="name">Generally either GET or POST</span></li><li><span class="name">HEAD sometimes used to get information about resource without actually getting the resource</span></li></ul></li><li><span class="name">RESOURCE</span><ul><li><span class="name">Path portion of the URL</span></li><li><span class="name">Entire URL also legal</span></li></ul></li><li><span class="name">VERSION</span><ul><li><span class="name">String literal: HTTP/1.1</span></li><li><span class="name">Could also be: HTTP/1.0</span><ul><li><span class="name">Increasingly rare</span></li></ul></li></ul></li><li><span class="name">Example going from URL to HTTP request line.</span><ul><li><span class="name">http://server:port/path/to/resource</span><ul><li><span class="name">TCP opens a connection to server at port</span></li><li><span class="name">GET /path/to/resource HTTP/1.1</span></li></ul></li></ul></li></ul></li><li><span class="name">Header section</span><ul><li><span class="name">Header section provides additional information about the request</span></li><li><span class="name">Types of headers:</span><ul><li><span class="name">General headers</span></li><li><span class="name">Message headers (specific to either requests or replies)</span></li><li><span class="name">Entity headers (information about message body)</span></li></ul></li><li><span class="name">Syntax:</span><ul><li><span class="name">HEADER: VALUE</span></li></ul></li><li><span class="name">One header per line.</span></li><li><span class="name">Examples</span><ul><li><span class="name">Date: Wed, 28 Sep 2011 5:30:00 GMT</span></li><li><span class="name">Content-type: text/html</span></li></ul></li><li><span class="name">Common Headers</span><ul><li><span class="name">Content-length</span><ul><li><span class="name">Required if the message body has content</span></li></ul></li><li><span class="name">Content-type</span><ul><li><span class="name">In replies, the MIME type specifier for resource</span><ul><li><span class="name">text/html</span></li><li><span class="name">image/gif</span></li></ul></li></ul></li><li><span class="name">Expires</span></li><li><span class="name">User-agent</span></li><li><span class="name">Host</span><ul><li><span class="name">Required in 1.1 requests</span></li></ul></li></ul></li><li><span class="name">HTTP header reference</span><ul><li><span class="name">http://www.cs.tut.fi/~jkorpela/http.html</span></li></ul></li></ul></li></ul></li><li><span class="name">HTTP Replies</span><ul><li><span class="name">3 parts</span><ul><li><span class="name">Status-line</span></li><li><span class="name">Header section</span></li><li><span class="name">Message body</span></li></ul></li><li><span class="name">Reply Status Line</span><ul><li><span class="name">VERSION CODE REASON</span></li><li><span class="name">VERSION</span><ul><li><span class="name">String literal: HTTP/1.1</span></li></ul></li><li><span class="name">CODE</span><ul><li><span class="name">3 digit number</span></li><li><span class="name">First digit indicates general response type:</span><ul><li><span class="name">1xx (Informational)</span></li><li><span class="name">2xx (Success)</span></li><li><span class="name">3xx (Redirection)</span></li><li><span class="name">4xx (Client Error)</span></li><li><span class="name">5xx (Server Error)</span></li></ul></li><li><span class="name">REASON</span><ul><li><span class="name">A human readable phrase</span></li><li><span class="name">Not standardized officially (can be anything), but some reason phrases are ubiquitous</span><ul><li><span class="name">"File Not Found" for 404</span></li></ul></li></ul></li></ul></li></ul></li></ul></li><li><span class="name">HTTP 1.1 vs 1.0</span><ul><li><span class="name">Differences small but significant</span></li><li><span class="name">1.1 allows connection to remain open to the server for additional resource requests</span><ul><li><span class="name">Why?</span></li></ul></li><li><span class="name">Lots of headers defined between 1.0 and 1.1</span><ul><li><span class="name">1.1 requires "Host" header in requests</span></li><li><span class="name">Why?</span></li></ul></li></ul></li><li><span class="name done">Telnet and Firebug / Developer Tool demonstrations</span></li></ul></li><li><span class="name">(10/16) Server-side concepts</span><ul><li><span class="name">URL Encoding</span><ul><li><span class="name">URL character set is constrained</span><ul><li><span class="name">Alphanumeric, $-_.+!*'():;?@&amp;/,</span></li><li><span class="name">Reserved characters used only for their reserved purpose</span><ul><li><span class="name">$, &amp;, +, =, comma, /, :, ;, ?, @</span></li></ul></li></ul></li><li><span class="name">Any other characters have to be encoded</span><ul><li><span class="name">%XX where X is a hex digit providing ASCII value of character.</span><ul><li><span class="name">Extended by HTML 4 to include Unicode from ISO-Latin up to %FF</span></li><li><span class="name">Technically, general Unicode still not allowed, but most browsers will substitute appropriate Unicode character if it encounters a sequence of escaped values in a URL.</span></li><li><span class="name">Example: http://en.wikipedia.org/wiki/%C9%B8</span></li></ul></li></ul></li><li><span class="name">http://www.blooberry.com/indexdot/html/topics/urlencoding.htm</span></li><li><span class="name">When is this going to matter?</span><ul><li><span class="name">When you have a choice in URL, then you can simply avoid using anything complicated.</span></li><li><span class="name">Internationalization is obviously important</span><ul><li><span class="name">There is ongoing work toward supporting Unicode in all Internet names (i.e., domains, URLs, etc.)</span></li></ul></li><li><span class="name">Most importantly: when URL includes information that came from the user as general input.</span><ul><li><span class="name">This is going to happen once we use URL's to address server-side processes and want to be able to send it parameter information.</span></li></ul></li></ul></li></ul></li><li><span class="name">Evolution of server-side programming</span><ul><li><span class="name">Original server-side mapped paths to files.</span></li><li><span class="name">Need for dynamic web page generation</span></li><li><span class="name">CGI bridged server to generating process</span><ul><li><span class="name">High-level process-to-process bridge</span></li><li><span class="name">HTTP remained mostly the same.</span><ul><li><span class="name">Some new headers and conventions to support CGI but loose integration at best.</span></li></ul></li></ul></li><li><span class="name">Evolved from page generation to interface generation as web apps developed</span></li><li><span class="name">Increasingly less used for generating HTML documents and toward back-end support for AJAX-based web applications.</span><ul><li><span class="name">No longer generating full HTML pages</span></li><li><span class="name">More likely: HTML snippets and/or serialized JavaScript objects that client-side dynamically incorporates into DOM as needed.</span></li><li><span class="name">Sometimes known as a "web-services" model.</span></li></ul></li></ul></li><li><span class="name">Basic CGI Concept</span><ul><li><span class="name">Instead of path to file, URL identifies a program to be executed</span></li><li><span class="name">Server initiates execution of program to generate HTTP reply</span></li><li><span class="name">Parameters passed to the program through the HTTP request</span><ul><li><span class="name">Exactly how depends on whether request is a GET or a POST</span></li></ul></li></ul></li><li><span class="name">CGI Server Requirements</span><ul><li><span class="name">Server must be configured to allow this.</span><ul><li><span class="name">www.cs.unc.edu is not</span></li><li><span class="name">wwwp.cs.unc.edu is (but only via VPN off campus)</span></li><li><span class="name">wwwx.cs.unc.edu is (but we're supposed to stay off of it)</span></li></ul></li><li><span class="name">Configuration may include restrictions:</span><ul><li><span class="name">Where programs can reside.</span></li><li><span class="name">Who can create them.</span></li><li><span class="name">File names.</span></li></ul></li><li><span class="name">Server configuration is specific to server software and specific server-side CGI framework being used</span></li></ul></li><li><span class="name">CGI via HTTP GET</span><ul><li><span class="name">Message body is empty (like most requests)</span></li><li><span class="name">Parameters encoded in URL</span><ul><li><span class="name">path/to/cgi_program?n1=v1&amp;n2=v2&amp;n3=v3</span></li><li><span class="name">"?" in URL indicates start of parameters</span></li><li><span class="name">Parameters provided as name / value pairs where "=" separates name from value</span></li></ul></li><li><span class="name">Parameter encoding</span><ul><li><span class="name">Parameter names and values may contain characters that are not allowed in URLs</span></li><li><span class="name">Spaces represented by "+"</span></li><li><span class="name">Other characters encoded using ASCII escape sequence:</span><ul><li><span class="name">%## where ## is two-digit hex number</span></li></ul></li><li><span class="name">+, =, &amp;, and ? also need to be encoded otherwise may be confused for their role as reserved URL characters</span></li></ul></li></ul></li><li><span class="name">CGI via HTTP POST</span><ul><li><span class="name">Resource name only has path</span></li><li><span class="name">Message body contains parameters</span></li><li><span class="name">Advantages:</span><ul><li><span class="name">URL doesn't contain parameter name and values</span></li><li><span class="name">Especially useful if value is long</span></li></ul></li><li><span class="name">Disadvantage:</span><ul><li><span class="name">Can't bookmark the URL in a way that includes parameter info.</span></li></ul></li></ul></li><li><span class="name">CGI Execution Environment</span><ul><li><span class="name">Environment variables used to pass information about the context of execution:</span><ul><li><span class="name">REQUEST_METHOD indicates GET or POST</span></li><li><span class="name">QUERY_STRING has encoded parameters if using GET</span></li><li><span class="name">CONTENT_LENGTH has size of message body if one exists</span></li><li><span class="name">PATH_INFO has extra path information.</span></li><li><span class="name">REMOTE_ADDR has IP address of client.</span></li><li><span class="name">REMOTE_HOST has hostname of client.</span></li><li><span class="name">SCRIPT_NAME has path to script that was called.</span></li><li><span class="name">SERVER_NAME has server's hostname or IP address.</span></li><li><span class="name">SERVER_SOFTWARE has name and version of server software.</span></li></ul></li><li><span class="name">Message body sent to program through STDIN (i.e., standard input)</span></li></ul></li><li><span class="name">Extra Path Info</span><ul><li><span class="name">Another way to pass info to the script.</span></li><li><span class="name">Anything between end of CGI script name as recognized by web server and beginning of parameters is "extra path info". Example:</span></li><li><span class="name">http://server.com/path/to/script.cgi/extra/path/info?p1=v1&amp;p2=v2</span></li><li><span class="name">Available through PATH_INFO</span></li><li><span class="name">Server also translates this extra path info relative to web server's path mapping rules. </span><ul><li><span class="name">This is available via PATH_TRANSLATED</span></li></ul></li></ul></li><li><span class="name">What server expects back from CGI program</span><ul><li><span class="name">Reply must be sent back through STDOUT</span></li><li><span class="name">Two parts to the reply:</span><ul><li><span class="name">Any reply headers followed by a blank line</span><ul><li><span class="name">A few special CGI-specific headers</span><ul><li><span class="name">Status</span><ul><li><span class="name">Allows you to signal what you want the status line of reply to be</span></li></ul></li></ul></li><li><span class="name">Any HTTP reply headers that need to be included</span></li></ul></li><li><span class="name">Reply body.</span></li></ul></li><li><span class="name">Server will finish constructing HTTP reply</span><ul><li><span class="name">Constructs a "200 OK" response unless told specifically otherwise by CGI status header</span></li><li><span class="name">May add its own HTTP reply headers</span></li></ul></li></ul></li><li><span class="name">Important CGI Ideas</span><ul><li><span class="name">Programming Language Independent</span></li><li><span class="name">Server identifies program from URL</span></li><li><span class="name">Rules for mapping URL's to program names and how to start program are server-specific</span></li><li><span class="name">Implemented at the OS level</span><ul><li><span class="name">This is why communication between server and CGI program must be done through stdin/stdout and using environment variables</span></li></ul></li></ul></li><li><span class="name">A few PHP examples</span><ul><li><span class="name">Generating HTML from a template.</span><ul><li><span class="name">Example Code As Text:</span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/php/ex1_php.txt</span></li></ul></li><li><span class="name">http://wwwp.cs.unc.edu/~kmp/comp426fall18/examples/php/ex1.php</span></li><li><span class="name">Also works on wwwx:</span><ul><li><span class="name">http://wwwx.cs.unc.edu/~kmp/comp426fall18/examples/php/ex1.php</span></li></ul></li><li><span class="name">Won't work on www:</span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/php/ex1.php</span></li></ul></li></ul></li><li><span class="name">Retrieving resources from a "database"</span><ul><li><span class="name">Idea here is that backend is providing access to server-side resources addressable by URL and available in multiple representations.</span><ul><li><span class="name">In this case, "messages" of a mail app.</span></li></ul></li><li><span class="name">Example Code As Text:</span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/php/mail-php.txt</span></li><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/php/model-php.txt</span></li></ul></li><li><span class="name">Retrieving JSON encoded list of message digests:</span><ul><li><span class="name">http://wwwp.cs.unc.edu/~kmp/comp426fall18/examples/php/mail.php/messages</span></li></ul></li><li><span class="name">Retrieving specific message in different representations:</span><ul><li><span class="name">http://wwwp.cs.unc.edu/~kmp/comp426fall18/examples/php/mail.php/messages/312</span></li><li><span class="name">http://wwwp.cs.unc.edu/~kmp/comp426fall18/examples/php/mail.php/messages/312.txt</span></li><li><span class="name">http://wwwp.cs.unc.edu/~kmp/comp426fall18/examples/php/mail.php/messages/312.html</span></li></ul></li></ul></li></ul></li></ul></li><li><span class="name">(10/30) Cookies / Session State</span><ul><li><span class="name">Cookies / Session State</span><ul><li><span class="name">State, what is it good for...</span><ul><li><span class="name">HTTP (as originally specified) is stateless</span><ul><li><span class="name">Each request/response interaction independent of any other.</span></li><li><span class="name">Server unable to relate one request to any prior.</span></li></ul></li></ul></li><li><span class="name">Why/when do we need state?</span><ul><li><span class="name">User-based context</span></li><li><span class="name">Preferences</span></li><li><span class="name">Login status</span></li><li><span class="name">Shopping carts</span></li><li><span class="name">Staged interactions</span></li></ul></li><li><span class="name">Think about ordering where you build-up information from one screen to another.</span><ul><li><span class="name">Example: cart verification, billing, shipping options, verify/place</span></li></ul></li><li><span class="name">Intra-session state</span><ul><li><span class="name">Could be maintained at client.</span></li><li><span class="name">Goes away when interaction with web application ends.</span></li><li><span class="name">May not be appropriate with proprietary or sensitive information.</span></li></ul></li><li><span class="name">Inter-session or Session-persistent state</span><ul><li><span class="name">Persists between interactions with web applications.</span></li></ul></li><li><span class="name">So if HTTP is stateless, how do we accomplish this?</span><ul><li><span class="name">Extend HTTP with some sort of state management facility.</span></li><li><span class="name">This is "cookies"</span><ul><li><span class="name">Introduced by Netscape in 1994/1995</span></li></ul></li><li><span class="name">Implemented using HTTP headers</span></li><li><span class="name">At first transparent to user.</span><ul><li><span class="name">No way to disable the mechanism</span></li><li><span class="name">San Jose Mercury News story broke</span></li><li><span class="name">Everyone flipped out...</span></li><li><span class="name">...and then realized it really was necessary to do anything cool on the web.</span></li></ul></li><li><span class="name">Standardized in October 2000 as IETF RFC 2109</span></li><li><span class="name">Re-written in April 2011 as IETF RFC 6265</span><ul><li><span class="name">http://tools.ietf.org/html/rfc6265</span></li></ul></li></ul></li><li><span class="name">Why the term "cookie"</span><ul><li><span class="name">Unclear, but the term was used prior to this to refer to different things in computer science generally related to a small piece of opaque data used for ID purposes.</span></li></ul></li><li><span class="name">Anatomy of a cookie:</span><ul><li><span class="name">6 parts</span></li><li><span class="name">Name	- required</span></li><li><span class="name">Value	- required</span></li><li><span class="name">Domain</span></li><li><span class="name">Path</span></li><li><span class="name">Max-Age or Expires</span></li><li><span class="name">Security flag</span></li></ul></li><li><span class="name">Lifecycle of a cookie</span><ul><li><span class="name">Server sets (or plants) a cookie as part of an HTTP response.</span><ul><li><span class="name">Set-cookie header</span></li></ul></li><li><span class="name">Browser stores the cookie</span></li><li><span class="name">When browser makes HTTP requests in the future...</span><ul><li><span class="name">Information in all previously stored cookies are compared with HTTP request for "matches"</span></li><li><span class="name">Information from matched cookies are sent with request as a Cookie header.</span></li></ul></li></ul></li><li><span class="name">Domain rules</span><ul><li><span class="name">Must be a suffix of the host setting the cookie.</span></li><li><span class="name">Must contain an embedded "."</span></li><li><span class="name">Must either match the full server name, be the IP address of the server, or start with a "."</span></li><li><span class="name">Must "domain match" the server it comes from</span><ul><li><span class="name">Can't set a cookie for some other server</span></li></ul></li><li><span class="name">If not set, then defaults to name of server.</span></li></ul></li><li><span class="name">Path rules</span><ul><li><span class="name">Must be a prefix of the URL requested</span></li><li><span class="name">If not set, defaults to path of URL up to last "/"</span></li><li><span class="name">Example:</span><ul><li><span class="name">If URL = http://www.cs.unc.edu/Courses/comp426-f14/kmp/lec15/ex1.html</span></li><li><span class="name">Then default path is: /Courses/comp426-f14/kmp/lec15/</span></li><li><span class="name">Legal paths that could be specified are any prefix of above, for example:</span><ul><li><span class="name">/</span></li><li><span class="name">/Courses</span></li><li><span class="name">/Courses/comp426-f14</span></li><li><span class="name">/Courses/comp426-f14/kmp</span></li><li><span class="name">/Courses/comp426-f14/kmp/lec15</span></li></ul></li></ul></li></ul></li><li><span class="name">Max-Age / Expires</span><ul><li><span class="name">If Max-Age specified:</span><ul><li><span class="name">Number of seconds after being set when cookie should expire</span></li></ul></li><li><span class="name">If Expires specified:</span><ul><li><span class="name">Date when cookie expires</span></li></ul></li><li><span class="name">Expired cookies are forgotten by the client</span></li><li><span class="name">If not specified, then cookie should be thrown away after browser quits</span></li></ul></li><li><span class="name">Cookie Matching</span><ul><li><span class="name">Biggest misunderstanding: servers DO NOT RETRIEVE cookies</span></li><li><span class="name">Servers RECEIVE cookies that browsers send that were originally planted by the server.</span><ul><li><span class="name">Set-Cookie header only exists in HTTP responses</span></li><li><span class="name">Stored on disk by browser</span></li></ul></li><li><span class="name">Information comes back in <span class="contentBold">future</span> HTTP requests</span><ul><li><span class="name">Every stored cookie is considered for "matching"</span></li><li><span class="name">Match occurs if:</span><ul><li><span class="name">Domain matches IP address, full server name, or suffix of domain name</span></li><li><span class="name">Path is a prefix of URL to be requested</span></li><li><span class="name">If secure flag was set originally, then only sent if connection is secure.</span><ul><li><span class="name">https vs. http</span></li><li><span class="name">More on this later.</span></li></ul></li></ul></li><li><span class="name">Information is transmitted in a "Cookie" header.</span><br /><span class="note">Cookie: $Version = &lt;version&gt;; &lt;name&gt;=&lt;value&gt; [; $Path = &lt;path&gt;] [; $Domain = &lt;domain&gt;]</span></li><li><span class="name">Can not guarantee that a cookie will ever come back.</span></li></ul></li></ul></li><li><span class="name">How cookies get used</span><ul><li><span class="name">Generally used as an index to server-side state for CGI-based responses.</span></li><li><span class="name">Want to be able to save/restore state when handling future CGI requests that are part of the same web application.</span></li><li><span class="name">If setup over a secure connection, can be used as an authentication token.</span></li><li><span class="name done">To do this:</span><ul><li><span class="name">Web application back end looks for its cookie.</span></li><li><span class="name">If it finds it, cookie value serves as some sort of key for restoring state information associated with this user.</span></li><li><span class="name">If it doesn't find it, creates session storage and sets key to the storage as a cookie in the response.</span></li></ul></li></ul></li><li><span class="name">Examine exchange with comp426.cs.unc.edu:3000 as an example</span></li></ul></li></ul></li><li><span class="name"> (11/1) MVC / RESTful Interfaces / JSON / AJAX</span><ul><li><span class="name">Model - View - Controller</span><ul><li><span class="name">Design pattern well suited for thinking about web applications</span></li><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/figures/mvc.png</span></li></ul></li><li><span class="name">Quick tour of MVC pattern</span><ul><li><span class="name">Model</span><ul><li><span class="name">Application state / data behind model objects</span></li></ul></li><li><span class="name">View</span><ul><li><span class="name">User interface to application</span></li><li><span class="name">Typically asynchronous, event-based responses to user directed actions.</span></li></ul></li><li><span class="name">Controller</span><ul><li><span class="name">Application logic / services</span></li><li><span class="name">Translates interactions to model updates and / or view changes</span></li></ul></li></ul></li><li><span class="name">Example app: web-based email</span><ul><li><span class="name">Model</span><ul><li><span class="name">Messages</span></li><li><span class="name">Contacts</span></li><li><span class="name">Folders</span></li></ul></li><li><span class="name">View</span><ul><li><span class="name">List view</span></li><li><span class="name">Message view</span></li><li><span class="name">Interactions with model</span><ul><li><span class="name">When new information needed</span></li><li><span class="name">When existing information updated</span></li><li><span class="name">Handles manipulations of view without interacting with model or controller components</span><ul><li><span class="name">Example: sorting</span></li></ul></li></ul></li></ul></li><li><span class="name">Controller</span><ul><li><span class="name">Retrieving a list of messages from a particular folder</span></li><li><span class="name">Retrieving details of a specific message</span></li><li><span class="name">Composing a message</span></li><li><span class="name">Sending a message</span></li><li><span class="name">Interaction with view</span><ul><li><span class="name">Controller provides API to high-level application behavior</span></li><li><span class="name">Invoked by view components as a response to user interaction with application</span></li></ul></li><li><span class="name">Interaction with model</span><ul><li><span class="name">Update/create application data/state as result of controller action</span></li><li><span class="name">Not as much in the other direction.</span></li></ul></li></ul></li></ul></li><li><span class="name">Web Applications as MVC</span><ul><li><span class="name">Block diagram of web application</span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/figures/basic-web-app-model.svg</span></li></ul></li><li><span class="name">Where's the model?</span><ul><li><span class="name">Server-side</span><ul><li><span class="name">Typically involves a database</span></li><li><span class="name">Haven't talked much about this part.</span></li></ul></li></ul></li><li><span class="name">Where's the view?</span><ul><li><span class="name">UI and interactivity is client-side</span></li><li><span class="name">JavaScript</span></li></ul></li><li><span class="name">Where's the controller?</span><ul><li><span class="name">Originally server-side</span><ul><li><span class="name">Provided via CGI</span></li><li><span class="name">View/Controller interactions expressed as URLs to CGI process via HTTP as a new page load.</span></li></ul></li><li><span class="name">More modern web applications</span><ul><li><span class="name">Split between client-side and server-side</span><ul><li><span class="name">Most logic on client-side, some on server-side as API to model data</span></li><li><span class="name">Security may demand some controller functionality to be put on server-side even though it could have been implemented client-side</span></li></ul></li><li><span class="name">View/Controller interactions expressed as URLs mapped to RESTful interfaces</span></li><li><span class="name">Access via AJAX</span><ul><li><span class="name">No new page load.</span></li><li><span class="name">Structured representation of  response</span><ul><li><span class="name">XML</span></li><li><span class="name">JSON</span></li><li><span class="name">Domain/application specific</span></li></ul></li></ul></li></ul></li><li><span class="name">Controller/Model interactions</span><ul><li><span class="name">PHP database facilities</span><ul><li><span class="name">Fairly extensive and easy to use</span></li></ul></li></ul></li></ul></li><li><span class="name">Model/View interactions</span><ul><li><span class="name">Generally no direct path.</span></li><li><span class="name">Mediated through a controller component</span><ul><li><span class="name">Probably best anyway</span><ul><li><span class="name">Authentication</span></li><li><span class="name">Authorization</span></li></ul></li></ul></li></ul></li></ul></li><li><span class="name">Old School Web Application Example</span><ul><li><span class="name">Demo mock up</span><ul><li><span class="name">http://wwwp.cs.unc.edu/~kmp/comp426fall18/examples/mail-app/old-school/list-view.php</span></li></ul></li><li><span class="name">Server-side components</span><ul><li><span class="name">list-view.php</span><ul><li><span class="name">http://wwwp.cs.unc.edu/~kmp/comp426fall18/examples/mail-app/old-school/list-view-php.txt</span></li></ul></li><li><span class="name">message-view.php</span><ul><li><span class="name">http://wwwp.cs.unc.edu/~kmp/comp426fall18/examples/mail-app/old-school/message-view-php.txt</span></li></ul></li><li><span class="name">model.php</span><ul><li><span class="name">http://wwwp.cs.unc.edu/~kmp/comp426fall18/examples/mail-app/old-school/model-php.txt</span></li><li><span class="name">Typically would not be stored in a directory accessible from the client directly.</span></li></ul></li></ul></li><li><span class="name">Discussion</span><ul><li><span class="name">Note that result of interactions with controller components (i.e., PHP templates) is a new view (i.e., web page) loaded into browser.</span></li><li><span class="name">Problems with this approach?</span></li></ul></li></ul></li><li><span class="name">Motivating AJAX</span><ul><li><span class="name">Consider auto-completion</span><ul><li><span class="name">Example: contacts in email application</span></li><li><span class="name">Why is this hard in old school architecture?</span></li></ul></li></ul></li><li><span class="name">AJAX</span><ul><li><span class="name">XMLHttpRequest object</span><ul><li><span class="name">Also known as: XHR</span></li><li><span class="name">Invented by Microsoft</span><ul><li><span class="name">Even a broken clock is right twice a day :-)</span></li></ul></li><li><span class="name">Allows JavaScript to issue an HTTP request and then to process the reply </span><ul><li><span class="name">Reply does not replace current document</span></li><li><span class="name">Doesn't even have to be HTML</span></li></ul></li></ul></li><li><span class="name">A is for Asynchronous</span><ul><li><span class="name">Request is made but then JavaScript keeps going.</span></li><li><span class="name">Reply invokes a handler in the future.</span><ul><li><span class="name">Like event-based UI programming.</span></li></ul></li></ul></li><li><span class="name">J is for JavaScript</span></li><li><span class="name">A is for And</span></li><li><span class="name">X is for XML</span><ul><li><span class="name">Original idea was that response would be some sort of structured data represented in XML</span><ul><li><span class="name">Now more likely to be JSON</span></li></ul></li></ul></li><li><span class="name">Google introduced auto-complete using AJAX</span><ul><li><span class="name">Consider how that would work.</span></li><li><span class="name">As you type, send what you have so far as a parameter to a CGI script on server using XHR</span></li><li><span class="name">Response is a list of possible completions.</span><ul><li><span class="name">Server-side so doesn't need to be built into view and is done on demand.</span></li></ul></li><li><span class="name">When response is received on client-side, JavaScript processes list to integrate with UI.</span><ul><li><span class="name">Dynamic dropdown menu or some such effect</span></li></ul></li><li><span class="name">Latency of request is hidden by "human" timescale of pausing while typing</span></li><li><span class="name">Auto-complete was a huge success</span></li></ul></li><li><span class="name">Pointed the way to using AJAX to move much of the controller functionality to the client</span><ul><li><span class="name">Biggest benefit is that application looks/feels smoother and more interactive.</span><ul><li><span class="name">Some latency naturally hidden by human reaction times and expectations.</span></li><li><span class="name">Avoiding page load prevents "flashing" effect and avoids cost of reconstructing DOM from scratch.</span></li><li><span class="name">Interface changes can be animated</span><ul><li><span class="name">Another opportunity to hide communication latency.</span></li></ul></li></ul></li></ul></li></ul></li><li><span class="name">RESTful interfaces</span><ul><li><span class="name">By using AJAX to refactor the MVC model with respect to where controller functionality is, client/server communication now represents controller/model interactions instead of view/controller interactions.</span><ul><li><span class="name">Why does that matter?</span><ul><li><span class="name">Consider what is being communicated and how it is best represented.</span></li></ul></li></ul></li><li><span class="name">Roy Fielding, Ph.D. dissertation (2000)</span><ul><li><span class="name">Argues for a uniform way of addressing controller services and model data in distributed applications with an MVC architecture.</span></li><li><span class="name">Principles:</span><ul><li><span class="name">Limit the number of "verbs" to a well-defined set.</span></li><li><span class="name">Uniformly address the "nouns"</span><ul><li><span class="name">Stateless access</span></li><li><span class="name">Idempotent actions</span></li></ul></li></ul></li></ul></li><li><span class="name">REST in practice</span><ul><li><span class="name">Model data and services exposed as RESTful web interfaces</span></li><li><span class="name">HTTP methods are the "verbs"</span><ul><li><span class="name">GET, POST, DELETE, PUT</span></li></ul></li><li><span class="name">Mapping of resources/services to CGI URLs are the "nouns"</span><ul><li><span class="name">Conventional style for this mapping that is considered "RESTful"</span></li></ul></li><li><span class="name">Cross section of method x URL mapped to CRUD operations</span><ul><li><span class="name">C = Create</span></li><li><span class="name">R = Read</span></li><li><span class="name">U = Update</span></li><li><span class="name">D = Delete</span></li></ul></li><li><span class="name">More on this later.</span></li></ul></li></ul></li><li><span class="name">JSON</span><ul><li><span class="name">Original idea of AJAX (i.e., XHR) was that response was XML</span><ul><li><span class="name">Why XML?</span><ul><li><span class="name">Capture structure</span></li><li><span class="name">Leverage other XML-based standards</span><ul><li><span class="name">Namespaces</span></li><li><span class="name">Schemas</span></li></ul></li><li><span class="name">Interoperate with 3rd party services</span><ul><li><span class="name">Standards like SOAP</span></li><li><span class="name">Negotiated and partial interfaces</span></li></ul></li><li><span class="name">But for web applications, application developer writes both sides.</span><ul><li><span class="name">Mitigates need for namespaces/schemas/etc.</span></li><li><span class="name">Price of XML overhead not worth it.</span></li></ul></li></ul></li></ul></li><li><span class="name">JSON = JavaScript Object Notation</span><ul><li><span class="name">Client-side is known to be JavaScript so makes it a natural choice for results from server-side.</span></li><li><span class="name">Idea behind JSON is that AJAX response should just be a serialized JavaScript object.</span><ul><li><span class="name">Then client-side can just deserialize the data directly into object form and use it.</span></li></ul></li><li><span class="name">JSON is that serialization</span><ul><li><span class="name">Simple direct syntax:</span><ul><li><span class="name">{"key": value}</span></li><li><span class="name">Value can be serialized sub-object, number, string, or boolean</span></li></ul></li><li><span class="name">Server-side framework generally provides routines to encode/decode</span><ul><li><span class="name">In PHP</span><ul><li><span class="name">json_encode</span></li><li><span class="name">json_decode</span></li></ul></li></ul></li></ul></li></ul></li><li><span class="name">Content type for JSON HTTP response:</span><ul><li><span class="name">application/json</span></li></ul></li></ul></li><li><span class="name">RESTful interfaces</span><ul><li><span class="name">REST as an idea: keep interface stateless and idempotent as much as possible</span></li><li><span class="name">URLs identify noun</span></li><li><span class="name">HTTP method identifies verb</span><ul><li><span class="name">May need to hack this if server doesn't support all methods needed</span></li></ul></li><li><span class="name">URL mapping convention</span><ul><li><span class="name">CGI-based URL identifies a controller</span><ul><li><span class="name">In our case: a .php script</span></li></ul></li><li><span class="name">Extra path info identifies the resource</span><ul><li><span class="name">Resource type path</span><ul><li><span class="name">Example: /mail.php/messages</span></li></ul></li><li><span class="name">Specific instance path</span><ul><li><span class="name">Example: /mail.php/messages/1</span></li></ul></li><li><span class="name">In this example: mail.php is the controller, messages is the resource</span></li><li><span class="name">If controller is exclusively being used to handle a single resource, then often combined base resource name with controller name.</span></li><li><span class="name">Example:</span><ul><li><span class="name">/messages.php</span></li><li><span class="name">/messages.php/1</span></li></ul></li><li><span class="name">Can model "sub-resources" as additional elements in extra path info</span></li><li><span class="name">Example:</span><ul><li><span class="name">/mail.php/messages/1/subject</span></li><li><span class="name">/mail.php/messages/1/body</span></li></ul></li><li><span class="name">If multiple representations available, model these as type extensions:</span><ul><li><span class="name">/mail.php/messages/1.json</span></li><li><span class="name">/mail.php/messages/1.xml</span></li><li><span class="name">/mail.php/messages/1.html</span></li></ul></li></ul></li></ul></li><li><span class="name">HTTP method mapping convention</span><ul><li><span class="name">GET with a resource type path </span><ul><li><span class="name">Return an index of the resources</span></li><li><span class="name">Parameters can be used to provide filter / search parameters</span><ul><li><span class="name">/mail.php/messages?start_date=10-3-2013&amp;end_date=10-17-2013</span></li></ul></li></ul></li><li><span class="name">GET with an instance path</span><ul><li><span class="name">Retrieves representation of resource named by id</span></li></ul></li><li><span class="name">POST with a resource type path</span><ul><li><span class="name">Creates resource</span></li><li><span class="name">CGI parameters provide resource data</span></li><li><span class="name">Result provides resource id</span></li></ul></li><li><span class="name">PUT with an instance path</span><ul><li><span class="name">Updates resource named by id</span></li><li><span class="name">CGI parameters provide resource data</span></li><li><span class="name">Servers often don't support PUT</span><ul><li><span class="name">Our server for example.</span></li><li><span class="name">In this case, POST used here as well</span></li></ul></li></ul></li><li><span class="name">DELETE with an instance path</span><ul><li><span class="name">Deletes / destroys resource named by id</span></li><li><span class="name">Often faked as a GET with a parameter to indicate delete is intended</span></li></ul></li></ul></li></ul></li><li><span class="name">Examples:</span><ul><li><span class="name">GET /mail.php/messages</span><ul><li><span class="name">Expected to return an index of all messages</span></li></ul></li><li><span class="name">POST /mail.php/messages </span><ul><li><span class="name">Expected to come with parameter name/value pairs for initializing a new instance</span><ul><li><span class="name">In the request body:</span><ul><li><span class="name">subject=Hello&amp;from=me&amp;to=you</span></li></ul></li></ul></li></ul></li><li><span class="name">GET /mail.php/messages/1</span><ul><li><span class="name">Expected to retrieve message by instance id</span></li></ul></li><li><span class="name">PUT /mail.php/messages/1</span><ul><li><span class="name">Expected to update message specified by instance id with new values sent as parameters</span></li></ul></li><li><span class="name">DELETE /mail.php/messages/1</span><ul><li><span class="name">Expected to delete instance</span></li><li><span class="name">May be implemented as</span><ul><li><span class="name">GET /mail.php/messages/1?action=delete</span></li></ul></li></ul></li></ul></li><li><span class="name">Back to RESTful interface for messages in our email app example</span><ul><li><span class="name">Base URL to get to example directory:</span><ul><li><span class="name">http://wwwp.cs.unc.edu/~kmp/comp426fall18/examples/mail-app/mail</span></li></ul></li><li><span class="name">Retrieve message instance by id:</span><ul><li><span class="name">Example: /mail.php/messages/123.txt</span><ul><li><span class="name">http://wwwp.cs.unc.edu/~kmp/comp426fall18/examples/mail-app/mail/mail.php/messages/123.txt</span></li></ul></li><li><span class="name">Same example, but retrieving JSON:</span><ul><li><span class="name">http://wwwp.cs.unc.edu/~kmp/comp426fall18/examples/mail-app/mail/mail.php/messages/123.json</span></li></ul></li></ul></li></ul></li><li><span class="name">AJAX</span><ul><li><span class="name">Facility for making an asynchronous HTTP request without reloading a new DOM.</span><ul><li><span class="name">XHR object is provided by browser to access this functionality.</span></li><li><span class="name">Details of XHR object differ from browser to browser</span><ul><li><span class="name">So jQuery normalizes this for us</span></li></ul></li></ul></li><li><span class="name">jQuery.ajax</span><ul><li><span class="name">Also: $.ajax</span></li><li><span class="name">$.ajax(url, settings)</span><ul><li><span class="name">url</span><ul><li><span class="name">URL to be requested</span></li></ul></li><li><span class="name">settings</span><ul><li><span class="name">Object with properties configuring the request</span></li><li><span class="name">Lots of options, but these are the most common:</span><ul><li><span class="name">type</span><ul><li><span class="name">HTTP method to use</span></li><li><span class="name">Typically "GET" or "POST"</span></li></ul></li><li><span class="name">dataType</span><ul><li><span class="name">Expected data type of response</span></li><li><span class="name">If not set, will try to infer it intelligently</span></li><li><span class="name">Possibilities: xml, json, script, html</span></li></ul></li><li><span class="name">success</span><ul><li><span class="name">Function object to be called if request is successful</span></li></ul></li><li><span class="name">error</span><ul><li><span class="name">Function object to be called if request is not successful</span></li></ul></li><li><span class="name">data</span><ul><li><span class="name">An object whose properties will be converted to HTTP parameter name/value pairs, encoded properly and appended to GET requests (or sent in body of POST requests)</span></li></ul></li></ul></li></ul></li><li><span class="name">Return value of $.ajax is a "jqXHR" object</span><ul><li><span class="name">Represents the AJAX request</span></li><li><span class="name">Provides information about the request as well as methods to attach handlers to different stages of the AJAX lifetime and to different possible results</span></li></ul></li></ul></li><li><span class="name">Success handler</span><ul><li><span class="name">Provided with three parameters</span><ul><li><span class="name">data</span><ul><li><span class="name">Data returned by server formatted according to dataType from above</span></li><li><span class="name">For JSON, data is the deserialized object.</span></li></ul></li><li><span class="name">textStatus</span><ul><li><span class="name">String describing the status of the response</span></li></ul></li><li><span class="name">jqXHR</span><ul><li><span class="name">jQuery XHR object associated with the request</span></li></ul></li></ul></li></ul></li><li><span class="name">Error handler</span><ul><li><span class="name">Provided with 3 parameters</span><ul><li><span class="name">jqXHR</span><ul><li><span class="name">jQuery XHR object</span></li></ul></li><li><span class="name">textStatus</span><ul><li><span class="name">Status text</span></li></ul></li><li><span class="name">errorThrown</span><ul><li><span class="name">String describing why the request failed</span><ul><li><span class="name">timeout, error, abort, parsererror</span></li></ul></li></ul></li></ul></li></ul></li></ul></li><li><span class="name">Example: new school version of mail viewer</span><ul><li><span class="name">http://wwwp.cs.unc.edu/~kmp/comp426fall18/examples/mail-app/new-school/</span></li></ul></li></ul></li></ul></li><li><span class="name">(11/8) : A4 / Final Project</span><ul><li><span class="name">A4: Rewrite Q and A app using AJAX</span><ul><li><span class="name">QandA app API documentation</span><ul><li><span class="name">https://docs.google.com/document/d/1T3ZS2jRuTg5VTwzSBHws6a1RxENFTVia0kV-E2C3IZM/edit?usp=sharing</span></li></ul></li><li><span class="name">Demonstrating the API with Postman</span></li><li><span class="name">Example</span><ul><li><span class="name">Starts by creating a login screen.</span><ul><li><span class="name">Provides input entries for username and password.</span></li><li><span class="name">Handles click on button by issuing AJAX call to login endpoint.</span></li></ul></li><li><span class="name">On successful login, tear down interface and rebuilds it with list of questions using AJAX to retrieve questions.</span></li><li><span class="name">For each question, retrieve answer and add answer to interface if exists.</span></li><li><span class="name">Add style.</span></li><li><span class="name">Complete example:</span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/a4-example/complete</span></li></ul></li></ul></li><li><span class="name">Important: </span><ul><li><span class="name">The backend needs your AJAX settings object to have the xhrFields property set as follows:</span><ul><li><span class="name">xhrFields: {withCredentials: true}</span></li></ul></li><li><span class="name">Access to comp426.cs.unc.edu from off campus requires the VPN</span></li></ul></li><li><span class="name">Notice that API parameters are expected in the URL.</span><ul><li><span class="name">Use JavaScript function encodeURIComponent in order to do the appropriate encoding for you.</span></li></ul></li></ul></li><li><span class="name">Final Project: create a front end for flight-related data.</span><ul><li><span class="name">Flight Data API documentation</span><ul><li><span class="name">http://comp426.cs.unc.edu:3001/</span></li></ul></li><li><span class="name">Demonstrating the API with Postman</span><ul><li><span class="name">Make special note of how to send data for POST/PUT as JSON objects in request body.</span></li></ul></li><li><span class="name">Final project requirements.</span></li><li><span class="name">Example</span><ul><li><span class="name">http://www.cs.unc.edu/~kmp/comp426fall18/examples/final-project-example</span></li></ul></li></ul></li></ul></li><li><span class="name">(11/13) Security and Authentication</span><ul><li><span class="name">Security concerns</span><ul><li><span class="name">Privacy</span><ul><li><span class="name">Protect communication between client/server</span></li></ul></li><li><span class="name">Authentication</span><ul><li><span class="name">Of client to server</span></li><li><span class="name">Of server to client</span></li></ul></li><li><span class="name">Safety</span><ul><li><span class="name">Of server from inputs from client</span></li><li><span class="name">Of client from scripts from server</span></li></ul></li></ul></li><li><span class="name">Authentication</span><ul><li><span class="name">Fundamental base fact:</span><ul><li><span class="name">Will have to trust someone or something as ground truth</span></li></ul></li><li><span class="name">Ways to establish authentication</span><ul><li><span class="name">Challenge/Response</span><ul><li><span class="name">Ask questions only authentic other party should be able to answer.</span></li></ul></li><li><span class="name">Third party authentication</span><ul><li><span class="name">Ask someone else to vouch for them.</span></li></ul></li></ul></li><li><span class="name">Digitally Signed Certificates</span><ul><li><span class="name">Most widely used form of third party authentication.</span></li><li><span class="name">Basic parts of a certificate:</span><ul><li><span class="name">Information presented as authentic</span></li><li><span class="name">Name/identity of certificate authority (CA)</span></li><li><span class="name">Digital signature of the CA</span><ul><li><span class="name">Specific to the certificate.</span></li></ul></li></ul></li><li><span class="name">Recipient of certificate must:</span><ul><li><span class="name">Trust the CA</span></li><li><span class="name">Verify the digital signature</span></li><li><span class="name">Problem 1: Be sure that digital signature came from the CA</span></li><li><span class="name">Problem 2: Be sure that signature applies to the information in the certificate and only that information</span></li></ul></li></ul></li></ul></li><li><span class="name">Public-key Cryptography</span><ul><li><span class="name">Diffie-Hellman, 1976</span></li><li><span class="name">Relies on a "trap-door" function</span></li><li><span class="name">Easy to compute but difficult to invert without more information.</span></li><li><span class="name">Easy to invert given more information.</span></li><li><span class="name">Specifically need a trap-door function that can be parameterized so that the parameter is uniquely related to the inversion key.</span><ul><li><span class="name">Even better if parameter and inversion keys are symmetric.</span></li></ul></li><li><span class="name">More formally...</span><ul><li><span class="name">Looking for a parameterized trapdoor function f with parameters K_pub and K_priv such that:</span><ul><li><span class="name">f(X, K_pub) = Y</span></li><li><span class="name">f(Y, K_priv) = X</span></li></ul></li><li><span class="name">with the constraint:</span><ul><li><span class="name">K_priv is difficult to calculate even if any/all of f(), K_pub, X, or Y are known.</span></li></ul></li></ul></li></ul></li><li><span class="name">Using Public-key Cryptography</span><ul><li><span class="name">Assume f() is well known</span></li><li><span class="name">Generate your key pair: K_pub, K_priv</span></li><li><span class="name">Give away K_pub while guarding K_priv</span><ul><li><span class="name">Keeping K_priv private is paramount</span></li></ul></li><li><span class="name">P is plaintext, C_P is encrypted P</span></li><li><span class="name">When you use K_priv to encrypt, you get authentication</span><ul><li><span class="name">Step 1: Encrypt P as f(P, K_priv) = C_P</span></li><li><span class="name">Step 2: Transmit C_P to recipient</span></li><li><span class="name">Step 3: Recipient decodes as f(C_P, K_pub) = P</span></li><li><span class="name">Recipient knows that message came only from you since only you have the private key that can make messages that can be decrypted by the public key.</span></li><li><span class="name">NOTE: privacy NOT provided because K_pub is widely known.</span><ul><li><span class="name">This means that if villain intercepts or somehow gets a copy of C_P, then villain can read message.</span></li></ul></li></ul></li><li><span class="name">When someone else uses K_pub to encrypt, you get privacy</span><ul><li><span class="name">Step 1: Friend encrypts P as f(P, K_pub) = C_P</span></li><li><span class="name">Step 2: Friend transmits C_P to you</span></li><li><span class="name">Step 3: Decode as f(C_P, K_priv) = P</span></li><li><span class="name">You know that message was private (i.e., between sender and you) because only you have the private key K_priv that can decode messages encoded with K_pub.</span></li><li><span class="name">NOTE: authentication NOT provided because everyone knows K_pub and a villain could have generated the message</span></li></ul></li><li><span class="name">To get BOTH privacy and authentication, both parties must generate separate key pairs and communication must go through two encryption steps.</span><ul><li><span class="name">Example:</span><ul><li><span class="name">Alice and Bob generate key pairs K_pub_a / K_priv_a and K_pub_b / K_priv_b.</span></li><li><span class="name">K_pub_a and K_pub_b are widely published.</span></li><li><span class="name">Alice guards K_priv_a and Bob guards K_priv_b.</span></li><li><span class="name">When Alice sends message P to Bob:</span><ul><li><span class="name">Step 1 - Alice encrypts with her private key:</span><ul><li><span class="name">C_P = f(P, K_priv_a)</span></li></ul></li><li><span class="name">Step 2 - Alice encrypts again with Bob's public key:</span><ul><li><span class="name">C_C_P = f(C_P, K_pub_b)</span></li></ul></li><li><span class="name">Step 3 - Transmit to Bob</span></li><li><span class="name">Step 4 - Bob decrypts with his private key:</span><ul><li><span class="name">C_P = f(C_C_P, K_priv_b)</span></li></ul></li><li><span class="name">Step 5 - Bob decrypts again with Alice's public key:</span><ul><li><span class="name">P = f(C_P, K_pub_a)</span></li></ul></li></ul></li></ul></li></ul></li></ul></li><li><span class="name">Back to Problem 1</span><ul><li><span class="name">Public key crypto solves problem 1</span></li><li><span class="name">CA publishes public key widely</span></li><li><span class="name">Everyone trusts CA to guard private key</span></li><li><span class="name">When certificate presented, decrypt signature with public key and if signature makes sense then you know that the signature came from CA</span></li></ul></li><li><span class="name">What about problem 2?</span><ul><li><span class="name">Need to make signature unique to the information being signed.</span></li><li><span class="name">Naive approach:</span><ul><li><span class="name">Signature could include encrypted version of all information in the certificate.</span><ul><li><span class="name">This would work because you could simply compare information decrypted from signature with information in certificate</span></li><li><span class="name">High overhead: certificate is twice as large as information in it. </span></li></ul></li></ul></li><li><span class="name">Better approach: </span><ul><li><span class="name">Use a "digest"</span><ul><li><span class="name">Digest: a smaller version of the same information</span></li></ul></li><li><span class="name">Properties we need:</span><ul><li><span class="name">Easy to calculate</span></li><li><span class="name">Hard to predict.</span></li><li><span class="name">Sensitive to initial conditions</span></li></ul></li><li><span class="name">Functions with these properties known as cryptographic hash functions.</span><ul><li><span class="name">SHA-3</span></li><li><span class="name">MD-5</span></li><li><span class="name">Many others</span></li></ul></li></ul></li></ul></li><li><span class="name">RSA: Rivest, Shamir, and Adleman</span><ul><li><span class="name">A specific public-key system</span></li><li><span class="name">One of the first to be practical, 1978</span></li><li><span class="name">Patent expired, so in the public domain</span></li><li><span class="name">Based on properties of</span><ul><li><span class="name">Modular arithmetic</span></li><li><span class="name">Prime numbers</span></li><li><span class="name">Factorization</span></li></ul></li><li><span class="name">Basic operation:</span><ul><li><span class="name">Pick two prime numbers p, q</span><ul><li><span class="name">Roughly equal in bitlength</span></li></ul></li><li><span class="name">m = p*q</span></li><li><span class="name">Now search for two integers e and d such that:</span><ul><li><span class="name">e*d-1 = k*(p-1)*(q-1) </span></li></ul></li><li><span class="name">Private key = (d,pq)</span></li><li><span class="name">Public key = (e,pq)</span></li></ul></li><li><span class="name">To encode:</span><ul><li><span class="name">Break up message into fixed-size blocks</span></li><li><span class="name">Treat each block as a big number (must be less than pq)</span></li><li><span class="name">For block b, encrypted version c = (b**e) mod pq</span><ul><li><span class="name">Note: the ** operator above is exponentiation</span></li></ul></li><li><span class="name">To decode, b = (c**d) mod pq</span></li></ul></li><li><span class="name">Large number exponentiation</span><ul><li><span class="name">Looks hard, but because result is mod pq, can be done reasonably easily since all intermediate results can be mod pq as well.</span></li></ul></li><li><span class="name">Why it works</span><ul><li><span class="name">Factorization is hard. Public key includes product pq but does not reveal either p or q</span></li><li><span class="name">No good way to factor other than brute force</span></li><li><span class="name">So if pq is large enough, the amount of time needed to factor can be made arbitrarily difficult</span><ul><li><span class="name">Size of pq in bits is thus related to strength of key</span></li><li><span class="name">Current "good" sizes are about 2048 bits long</span></li></ul></li></ul></li></ul></li><li><span class="name">Now we have authentication so that server and/or client can verify its identity. Still need privacy.</span></li><li><span class="name">Private communication</span><ul><li><span class="name">Public key algorithms are slow</span><ul><li><span class="name">Good for one time or small encryption jobs like certificates</span></li><li><span class="name">Not so good for trying to encrypt a long stream of communication.</span></li></ul></li><li><span class="name">Private key (aka shared key or symmetric key) systems are fast</span><ul><li><span class="name">Prior to public key systems, crypto worked by using a "shared" key between the two parties.</span></li><li><span class="name">Relies on keeping the key secret to only those two parties.</span></li></ul></li><li><span class="name">Solution:</span><ul><li><span class="name">Use public key system to verify identity of other party and to exchange a "session" key. Then use shared session key to encrypt channel using a shared key system.</span></li></ul></li></ul></li><li><span class="name">HTTP over TLS</span><ul><li><span class="name">Transport Layer Security (based on earlier SSL - Secure Sockets Layer)</span></li><li><span class="name">URLs start with https</span></li><li><span class="name">TLS protocol sits <span class="contentBold">between</span> HTTP and TCP</span><ul><li><span class="name">Recall what TCP provides HTTP</span></li></ul></li><li><span class="name">TLS Handshake</span><ul><li><span class="name">Server provides certificate to client with public key</span></li><li><span class="name">Client uses key to generate a session key and sends back to server</span></li><li><span class="name">HTTP works exactly the same</span><ul><li><span class="name">TLS provides interface to HTTP that looks just like TCP</span></li></ul></li><li><span class="name">TCP works exactly the same</span><ul><li><span class="name">Doesn't care about meaning of bytes</span></li></ul></li><li><span class="name">TLS acts like a filter between them</span><ul><li><span class="name">Encrypts everything with shared key using well-known shared key system like 3DES or Blowfish (many others)</span></li></ul></li></ul></li></ul></li></ul></li><li><span class="name"> (11/13, 11/15) Same-Origin Policy / Cross-Site Scripting </span><ul><li><span class="name">Same-Origin Policy</span><ul><li><span class="name">Scripts from one server should not be able to manipulate or see data from a different server</span></li><li><span class="name">Introduced in most major browsers in early to mid 2000's.</span></li><li><span class="name">What counts as "same-origin"?</span><ul><li><span class="name">Same host</span></li><li><span class="name">Same protocol</span></li><li><span class="name">Same port number</span></li></ul></li><li><span class="name">Why is this a problem?</span><ul><li><span class="name">Constrains architecture of server resources</span></li><li><span class="name">Web applications that want/need to use resources from 3rd parties.</span></li></ul></li></ul></li><li><span class="name">Local Proxy Workaround</span><ul><li><span class="name">Route third party URLs back to server</span></li><li><span class="name">Have server make the request and return result</span></li><li><span class="name">Pros: straightforward, don't have to alter API implementation</span></li><li><span class="name">Cons: doubles the response time, forces server to scale up to peak demand across all resources</span></li></ul></li><li><span class="name">JSONP</span><ul><li><span class="name">The &lt;script&gt; loophole</span><ul><li><span class="name">&lt;script&gt; tag does not have the same origin restriction</span></li><li><span class="name">So scripts themselves can come from anywhere, but once received and executing as part of document, the script code can only contact the server where the document came from.</span></li><li><span class="name">JSONP uses this loophole to get around the same origin policy</span><ul><li><span class="name">JSONP = JSON with padding</span></li></ul></li><li><span class="name">Seems to have been invented on Dec. 5, 2005 by Bob Ippolito</span></li></ul></li><li><span class="name">JSONP in concept</span><ul><li><span class="name">When client-side code wants to request a 3rd party API and associate a callback with the result (i.e., make an AJAX like call)...</span><ul><li><span class="name">Programmatically Insert a &lt;script&gt; tag into DOM</span></li><li><span class="name">Set 'src' attribute to 3rd party API URL</span></li><li><span class="name">Encode in URL an additional parameter called jsonp</span></li><li><span class="name">Value of jsonp is text string representing JavaScript code snippet that invokes the callback.</span></li></ul></li><li><span class="name">When server-side receives HTTP request for URL...</span><ul><li><span class="name">Detect if jsonp parameter is set.</span></li><li><span class="name">If so, then return JSON result wrapped around with (i.e., "padded" by) the code snippet passed in jsonp</span></li><li><span class="name">Result is constructed as: &lt;code_snippet&gt;(&lt;json_result&gt;);</span><ul><li><span class="name">&lt;code_snippet&gt; = value of jsonp parameter</span></li><li><span class="name">&lt;json_result&gt; = JSON encoding of result produced by URL</span></li></ul></li><li><span class="name">Doing so makes what is returned a valid JavaScript script when the result gets back to the client</span></li><li><span class="name">Recall that request was made as a result of attempting to load the source for a script tag.</span></li><li><span class="name">Result from server gets sourced as JavaScript effectively calling the code snippet with the JSON resource passed as a parameter. </span><ul><li><span class="name">Essentially a callback handler.</span></li></ul></li></ul></li></ul></li><li><span class="name">JSONP notes:</span><ul><li><span class="name">Pros:</span><ul><li><span class="name">Allows a RESTful API that produces JSON to very easily provide JSONP as well.</span></li></ul></li><li><span class="name">Cons:</span><ul><li><span class="name">Could be a security risk and allow JavaScript insertion attacks</span></li></ul></li></ul></li></ul></li><li><span class="name">CORS - A Standardized Solution</span><ul><li><span class="name">CORS: Cross-Origin Resource Sharing</span></li><li><span class="name">W3C Specification</span></li><li><span class="name">Allows domain-based access control by 3rd party server</span></li><li><span class="name">For JSON-based web resources, AJAX call is done in two parts:</span><ul><li><span class="name">Simple Requests</span><ul><li><span class="name">HTTP method is GET, POST, or HEAD</span></li><li><span class="name">Limited set of HTTP request headers</span></li><li><span class="name">Request will include Origin header</span><ul><li><span class="name">"Origin" HTTP header reveals domain origin of page making the request</span></li></ul></li><li><span class="name">Response from server must include Access-Control-Allow-Origin</span><ul><li><span class="name">Value must be value of Origin header or "*" to indicate any domain allowed.</span></li></ul></li></ul></li><li><span class="name">Not-Simple</span><ul><li><span class="name">PUT, not-so-simple HTTP request headers</span></li><li><span class="name">Pre-flight "option" request</span><ul><li><span class="name">HTTP method set to OPTIONS</span></li><li><span class="name">"Origin" HTTP header reveals domain origin of page making the request</span></li><li><span class="name">"Access-Control-Request-Method" indicates HTTP request type to be made</span></li><li><span class="name">"Access-Control-Request-Headers" indicates a list of custom or non-simple headers that will be set in the actual HTTP request</span></li></ul></li><li><span class="name">Server-side response to pre-flight option request</span><ul><li><span class="name">If everything OK...</span><ul><li><span class="name">Must include following headers in response:</span><ul><li><span class="name">Access-Control-Allow-Origin</span><ul><li><span class="name">Set to "*" to allow all domains, otherwise set to value provided in "Origin" header in request</span></li></ul></li><li><span class="name">Access-Control-Allow-Methods</span><ul><li><span class="name">Set to comma separated list of HTTP methods allowed for the actual request</span></li></ul></li></ul></li><li><span class="name">Optionally include the following headers in response:</span><ul><li><span class="name">Access-Control-Allow-Credentials</span><ul><li><span class="name">Not required. </span></li><li><span class="name">By default, cookies not sent cross-domain. If you need cookies, set to "true".</span></li></ul></li><li><span class="name">Access-Control-Max-Age</span><ul><li><span class="name">Not required. </span></li><li><span class="name">To avoid preflight option request for every request made to server, the server can set this header to the number of seconds that the client can cache this preflight response.</span></li></ul></li></ul></li><li><span class="name">Content-type usually set to 'text/html' but don't actually need to have any content.</span></li></ul></li><li><span class="name">If everything not OK... </span><ul><li><span class="name">Simply send any response without the necessary headers</span></li></ul></li></ul></li><li><span class="name">If all is good with option preflight...</span><ul><li><span class="name">The actual HTTP request for the AJAX call is made.</span></li><li><span class="name">Response from server must set Access-Control-Allow-Origin as it did for the pre-flight option request</span></li></ul></li></ul></li></ul></li><li><span class="name">CORS Notes</span><ul><li><span class="name">Only works with modern browsers, so supporting older browsers requires JSONP workaround.</span></li></ul></li></ul></li></ul></li></ul>
  </body>
</html>